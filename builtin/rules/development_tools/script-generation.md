# 脚本生成规则

本规则定义了脚本生成的标准化流程和要求，确保生成的脚本具备高质量、可维护性和可执行性。

## 你必须遵守的原则

### 1. 需求理解原则

- **必须**充分理解用户的脚本需求和使用场景
- **必须**明确脚本的功能边界和预期输出
- **禁止**在需求不明确的情况下开始脚本生成

### 2. 技术选择原则

- **必须**根据目标环境选择最合适的脚本语言
- **必须**考虑性能、安全性和可维护性要求
- **禁止**使用过时或不兼容的技术方案

### 3. 代码质量原则

- **必须**生成清晰、可读、可维护的脚本代码
- **必须**遵循所选语言的最佳实践和编码规范
- **禁止**生成包含安全漏洞或性能问题的代码

### 4. 文档完整原则

- **必须**提供完整的脚本使用说明和参数文档
- **必须**解释关键代码段的功能和实现逻辑
- **禁止**提供缺乏文档或说明不清晰的脚本

## 你必须遵循的工作流程

### 阶段1：需求分析

- **必须**明确脚本的功能需求和业务目标
- **必须**确认目标运行环境和系统要求
- **必须**了解性能和安全要求
- **必须**确定输入输出格式和数据流向
- **必须**确认脚本保存路径和文件权限

### 阶段2：脚本设计

- **必须**选择最适合目标环境的脚本语言
- **必须**设计清晰的脚本结构和模块划分
- **必须**规划完善的错误处理机制
- **必须**考虑脚本的可扩展性和长期维护性
- **禁止**设计过度复杂或难以维护的脚本结构

### 阶段3：脚本生成与保存

- **必须**生成完整、可直接执行的脚本代码
- **必须**将脚本写入用户指定的文件路径
- **必须**添加必要的注释和说明文档
- **必须**包含使用示例和调用方法
- **必须**提供测试方法和验证步骤
- **禁止**生成包含语法错误或逻辑缺陷的脚本

### 阶段4：优化与改进

- **必须**根据用户反馈及时优化脚本功能
- **必须**添加参数化支持提高脚本灵活性
- **必须**提高脚本的健壮性和容错能力
- **必须**优化性能关键部分和执行效率
- **禁止**忽视用户反馈或拒绝合理改进建议

## 具体要求和规范

### 脚本输出规范

- **必须**提供完整、可直接运行的脚本代码
- **必须**将脚本保存到用户指定的文件路径
- **必须**使用代码块展示脚本，便于用户复制和使用
- **必须**解释关键代码段的功能和实现逻辑
- **必须**提供详细的脚本使用说明和参数说明
- **必须**列出可能的错误情况及对应的解决方法

### 脚本质量要求

- **必须**确保脚本语法正确，无执行错误
- **必须**添加适当的注释说明复杂逻辑
- **必须**处理常见的异常情况和边界条件
- **必须**提供清晰的命令行参数解析（如适用）
- **禁止**生成包含硬编码路径或敏感信息的脚本
- **禁止**忽视错误处理或异常情况处理

### 技术规范

- **必须**根据目标环境选择合适的脚本语言（Python、Bash、PowerShell等）
- **必须**遵循所选语言的编码规范和最佳实践
- **必须**考虑跨平台兼容性（如需要）
- **必须**优化脚本执行效率和资源使用
- **禁止**使用已弃用或不推荐的语言特性

## 实践指导

### 沟通最佳实践

- **必须**保持专业、清晰的技术沟通风格
- **必须**对脚本实现方案提供详细的技术解释
- **必须**对用户的问题和需求保持敏感和及时响应
- **必须**在遇到模糊需求时主动澄清和确认
- **禁止**使用模糊或不确定的技术表述

### 脚本优化策略

- **建议**记录常见的脚本模式和解决方案，建立知识库
- **建议**总结可复用的代码片段和函数库
- **建议**持续更新和优化脚本最佳实践
- **建议**针对不同场景建立标准化的脚本模板
- **建议**定期回顾和改进脚本生成质量

### 常见场景处理

- **复杂需求**：必须分解为多个简单步骤，逐步处理
- **性能要求**：必须进行性能分析，优化关键路径
- **安全敏感**：必须遵循安全编程规范，避免常见漏洞
- **跨平台需求**：必须考虑兼容性，提供平台特定方案
- **维护性要求**：必须设计模块化结构，便于后续维护

### 质量提升方法

- **代码审查**：定期进行脚本质量检查和优化
- **用户反馈**：积极收集和应用用户改进建议
- **技术更新**：及时采用新的脚本技术和最佳实践
- **性能监控**：持续监控脚本执行效率和资源使用
- **文档维护**：保持文档的准确性和完整性

## 执行检查清单

### 需求确认阶段

- [ ] **需求理解**：已充分理解用户的脚本需求和使用场景
- [ ] **环境确认**：已明确目标运行环境和系统要求
- [ ] **功能边界**：已确定脚本的功能范围和预期输出
- [ ] **性能要求**：已了解性能和安全相关要求

### 设计阶段

- [ ] **语言选择**：已选择最适合的脚本语言
- [ ] **架构设计**：已设计清晰的脚本结构和模块划分
- [ ] **错误处理**：已规划完善的错误处理机制
- [ ] **可维护性**：已考虑脚本的可扩展性和维护性

### 实现阶段

- [ ] **代码完整**：已生成完整、可执行的脚本代码
- [ ] **文件保存**：已将脚本保存到指定文件路径
- [ ] **注释文档**：已添加必要的注释和说明文档
- [ ] **使用示例**：已包含使用示例和调用方法
- [ ] **测试验证**：已提供测试方法和验证步骤

### 质量检查阶段

- [ ] **语法检查**：已验证脚本语法正确性
- [ ] **功能测试**：已测试脚本核心功能
- [ ] **错误处理**：已验证异常情况和边界条件处理
- [ ] **文档完整**：已检查文档的准确性和完整性
- [ ] **用户反馈**：已收集并处理用户反馈意见

### 交付阶段

- [ ] **代码交付**：已完成脚本文件交付
- [ ] **文档交付**：已完成使用说明文档交付
- [ ] **培训支持**：已提供必要的使用指导
- [ ] **后续支持**：已建立后续优化和维护机制
