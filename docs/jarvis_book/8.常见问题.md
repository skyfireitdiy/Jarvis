# 8. 常见问题 (FAQ)

本章收集了用户在使用 Jarvis 过程中最常遇到的一些问题及其解决方案。

---

### Q1: Jarvis的提交命令(Ctrl+J)与VSCode的显示/隐藏快捷键冲突怎么办？

**A1:** Jarvis使用Ctrl+J作为提交命令，这与VSCode的显示/隐藏面板默认快捷键冲突。

**解决方案:**
修改VSCode快捷键配置:

1. 打开VSCode快捷键设置: `Ctrl+K Ctrl+S`
2. 搜索"Toggle Panel"
3. 右键点击当前快捷键绑定(Ctrl+J)，选择"Remove Keybinding"移除绑定
4. 或者可以重新绑定到其他快捷键组合(如Ctrl+`)

---

### Q2: 在多行输入模式下，为什么按回车键无法提交？

**A2:** 这是因为Jarvis在多行输入模式下，回车键被设计为输入换行符，以便用户可以方便地输入多行文本（例如粘贴代码、编写详细描述等）。

**解决方案:**
使用 `Ctrl + J` 快捷键来提交您的多行输入。这个快捷键提示通常会显示在多行输入框的上方。

---

### Q3: 如何使用自定义的 OpenAI 接口（API Base URL）？

**A3:** 通过设置环境变量 `OPENAI_API_BASE` 来指定自定义的 OpenAI 接口地址。Jarvis 默认使用官方地址 `https://api.openai.com/v1`，如果你使用代理或第三方服务，请将其设置为对应的 Base URL。

**设置方法示例:**

- Linux/macOS（Bash/Zsh）:
  - 临时设置（当前终端会话有效）:
    - `export OPENAI_API_BASE="https://your-proxy.example.com/v1"`
  - 永久设置（写入 shell 配置文件，如 ~/.bashrc 或 ~/.zshrc）:
    - 在配置文件中添加上述 `export` 行并重新加载或重启终端
- Windows PowerShell:
  - 当前会话: `"$env:OPENAI_API_BASE = 'https://your-proxy.example.com/v1'"`

**说明:**

- 变更环境变量后，重启 Jarvis 以使配置生效。
- `OPENAI_API_BASE` 仅影响 OpenAI 平台的请求地址，不影响其他平台。

---

### Q4: 如何向 OpenAI 客户端传入自定义的 HTTP 头（headers）？

**A4:** 设置环境变量 `OPENAI_EXTRA_HEADERS` 为一个 JSON 对象，Jarvis 会在初始化 OpenAI 客户端时将其作为默认 HTTP 头传入（若当前 SDK 版本不支持，则会给出警告但不影响基本功能）。

**示例:**

- Linux/macOS（推荐使用单引号包裹，避免转义问题）:
  - `export OPENAI_EXTRA_HEADERS='{"User-Agent":"Jarvis/1.0","X-Source":"jarvis"}'`
- Windows PowerShell:
  - `"$env:OPENAI_EXTRA_HEADERS = '{\"User-Agent\":\"Jarvis/1.0\",\"X-Source\":\"jarvis\"}'"`

**注意事项:**

- `OPENAI_EXTRA_HEADERS` 的值必须是 JSON 对象（形如 `{"Key":"Value"}`），键和值会按字符串处理。
- 如需取消自定义头，删除或清空该环境变量即可（Linux/macOS 可用 `unset OPENAI_EXTRA_HEADERS`）。
- 常见用途包括：自定义 User-Agent、添加追踪头（如 `X-Trace`）、满足企业代理的额外认证需求等。
