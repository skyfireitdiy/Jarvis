{
  "problem_type": "创建规范文件",
  "content": "# 创建规范文件方法论\n\n## 问题重述\n\n在 builtin/rules 目录中创建新的开发规范文件时，需要遵循统一的格式和风格，确保与现有规范文件保持一致，并通过所有静态检查。\n\n## 可复用解决流程\n\n### 步骤 1：分析现有规范文件\n使用以下命令查看目录中的现有规范文件：\n```bash\nfind builtin/rules -type f -name '*.md' | head -20\n```\n\n选择 2-3 个相关的现有规范文件作为参考，读取其内容了解：\n- 文档结构（标题层级、章节组织）\n- 语言风格（是否使用\"必须\"、\"禁止\"等强制性语言）\n- 代码示例的格式（是否包含正反对比）\n- 检查清单的组织方式\n\n### 步骤 2：设计规范内容框架\n参考现有规范文件，设计新规范的章节结构，通常包含：\n1. 标题和简介\n2. 工作流程（如适用）\n3. 核心原则（必须遵守）\n4. 具体要求或规范\n5. 实践指导\n6. 代码示例（正反对比）\n7. 执行检查清单\n\n### 步骤 3：创建规范文件\n使用 edit_file 工具创建新文件：\n- 文件路径：`builtin/rules/[规范名称].md`\n- 使用空 search 参数 \"\" 重写整个文件\n- 确保文件以单个换行符结尾\n\n### 步骤 4：格式检查与修复\n执行 markdownlint 检查：\n```bash\nmarkdownlint builtin/rules/[规范名称].md\n```\n\n常见的格式问题：\n- MD022: 标题前后需要空行\n- MD031: 代码块前后需要空行\n- MD032: 列表前后需要空行\n- MD040: 代码块需要指定语言\n- MD047: 文件应以单个换行符结尾\n- MD012: 避免连续多个空行\n\n使用 edit_file 逐个修复格式问题，每次修改后等待验证结果。\n\n### 步骤 5：最终验证\n确认：\n1. 文件成功创建在正确路径\n2. 所有 markdownlint 检查通过\n3. 内容完整，结构清晰\n4. 与现有规范文件风格一致\n\n### 步骤 6：保存记忆\n将新规范文件的关键信息保存到项目长期记忆，便于后续检索。\n\n## 注意事项\n\n1. **格式严格要求**：\n   - 必须使用 Markdown 格式（.md 后缀）\n   - 必须通过 markdownlint 所有检查\n   - 文件必须以单个换行符结尾\n\n2. **风格一致性**：\n   - 使用\"必须\"、\"禁止\"等强制性语言\n   - 使用表情符号增强可读性（如 📝、⚡、✅）\n   - 包含正反对比的代码示例\n   - 提供可执行的检查清单\n\n3. **避免临时文件**：\n   - 不要创建临时文件或备份文件\n   - 使用 edit_file 工具进行精确修改\n   - 禁止使用 sed 或脚本进行复杂编辑\n\n4. **嵌套代码块特殊处理**：\n   - 如果示例中包含嵌套的 markdown 代码块，也需要符合格式要求\n   - 为代码块指定语言（如 ```python、```markdown）\n   - 确保代码块前后有足够的空行\n\n## 可选步骤\n\n- 如果规范内容超过 200 行或涉及多文件，考虑使用 task_list_manager 拆分任务\n- 使用 save_memory 保存规范的核心理念，便于未来检索",
  "scope": "project"
}