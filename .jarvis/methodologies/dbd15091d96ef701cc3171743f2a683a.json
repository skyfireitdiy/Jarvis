{
  "problem_type": "agent转换为builtin规则",
  "content": "# Agent 转换为 Builtin 规则方法论\n\n## 问题重述\n将 `builtin/agent` 目录中的 YAML 格式 agent 定义转换为 `builtin/rules` 目录中的 Markdown 格式规则文件，并更新规则索引文件。\n\n## 可复用解决流程\n\n### 步骤 1：创建任务列表\n使用 `task_list_manager` 创建任务列表，包含：\n1. 为每个 agent 创建一个转换任务\n2. 创建一个更新索引文件的任务（依赖所有转换任务）\n\n### 步骤 2：转换单个 Agent\n对每个 agent 执行以下操作：\n1. 读取源 YAML 文件（`builtin/agent/xxx.yaml`）\n2. 提取关键信息：\n   - `name` → 规则主标题（使用 `#`）\n   - `description` → 标题下的简述\n   - `system_prompt` → 规则详细内容\n3. 转换内容格式：\n   - 移除 `use_tools`、`need_summary` 等 agent 特定字段\n   - 将 YAML 格式转换为 Markdown 格式\n4. 创建目标文件（`builtin/rules/xxx.md`）\n5. 检查并修复格式问题（如 markdownlint 行长度限制）\n\n### 步骤 3：更新规则索引\n1. 读取 `builtin/rules/builtin_rules.md`\n2. 根据规则功能分类（如架构设计、代码质量、开发工具等）\n3. 为每个规则添加条目，格式：\n   ```markdown\n   ### 规则名称\n  \n   规则描述。（{{ rule_file_dir }}/rule-file.md）\n   ```\n4. 确保路径使用 `{{ rule_file_dir }}` 变量\n5. 检查并修复格式问题\n\n### 步骤 4：验证\n1. 检查所有规则文件是否存在\n2. 运行 markdownlint 验证格式\n3. 确认索引文件包含所有新规则\n4. 更新任务状态为 completed\n\n## 注意事项\n\n1. **文件命名**：使用小写字母和连字符（如 `opensource-deployment-expert.md`）\n2. **格式规范**：\n   - Markdown 行长度限制 80 字符\n   - 使用软换行保持可读性\n   - 长描述、URL、代码行需要拆分\n3. **内容完整性**：\n   - 保留 system_prompt 的所有内容\n   - 不包含 use_tools 等字段\n   - 保持原有结构和风格\n4. **分类原则**：\n   - 根据规则功能选择合适分类\n   - 参考现有规则的分类方式\n   - 新分类需有明确边界\n\n## 可选步骤\n\n1. 如果 agent 数量较多，可以使用批量任务处理\n2. 对于复杂转换，可以先转换一个 agent 作为模板\n3. 在转换过程中记录常见问题，形成 FAQ",
  "scope": "project"
}