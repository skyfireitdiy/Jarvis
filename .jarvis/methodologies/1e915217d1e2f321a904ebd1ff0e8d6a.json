{
  "problem_type": "Python代码重构",
  "content": "# Python代码重构方法论\n\n## 问题重述\nPython代码重构旨在改善代码结构、可读性和可维护性，同时保持原有功能不变。常见场景包括：函数过长、职责不清、代码重复等。\n\n## 可复用解决流程\n\n### 第一步：分析与规划（RESEARCH + INNOVATION + PLAN）\n1. 识别重构目标：明确需要重构的代码模块和具体问题\n2. 分析当前代码结构：理解现有逻辑和依赖关系\n3. 设计重构方案：制定详细的重构计划，确保功能不变\n4. 评估风险：识别可能影响的功能点和测试需求\n\n### 第二步：创建任务列表（PLAN）\n- 将重构任务分解为多个小任务\n- 每个任务职责单一、易于验证\n- 设置任务依赖关系，确保执行顺序\n\n### 第三步：执行重构（EXECUTE）\n1. 提取私有方法：将相关逻辑分组到私有方法\n   - 单一职责：每个方法只负责一个明确的职责\n   - 参数清晰：明确方法的输入输出\n   - 添加注释：说明方法的作用和关键逻辑\n  \n2. 重构原方法：用私有方法调用替换内联逻辑\n   - 保持顺序：确保执行顺序不变\n   - 添加分组注释：说明各部分功能\n   - 验证类型：处理类型声明问题\n\n3. 验证重构结果：\n   - 语法检查：确保代码无语法错误\n   - 导入测试：验证模块可以正常导入\n   - 功能验证：确保原有功能不变\n\n### 第四步：审查与总结（REVIEW）\n1. 检查代码质量：符合PEP8规范\n2. 确认功能完整性：所有原有功能正常工作\n3. 更新文档：如果有必要，更新相关文档\n\n## 注意事项\n\n1. **最小变更原则**：保持原有功能不变，只改变代码结构\n2. **小步提交**：每次修改后立即提交，便于回退\n3. **充分测试**：重构后必须测试所有相关功能\n4. **保持风格一致**：遵循项目代码风格和命名规范\n5. **类型安全**：注意类型声明，避免类型错误\n\n## 特殊场景：__init__方法重构\n\n当__init__方法过于复杂时，可按以下模式重构：\n\n```python\nclass MyClass:\n    def __init__(self, ...):\n        # 1. 初始化基本属性\n        self._init_basic_attributes(...)\n       \n        # 2. 初始化管理器\n        self._init_managers(...)\n       \n        # 3. 初始化工具\n        self._init_tools(...)\n       \n        # 4. 准备父类参数\n        params = self._prepare_parent_params(...)\n       \n        # 5. 调用父类初始化\n        super().__init__(**params)\n       \n        # 6. 初始化依赖父类的组件\n        self._init_dependent_components(...)\n```\n\n重构原则：\n- 将相关初始化动作分组到私有方法\n- 遵循初始化顺序（基本属性 → 管理器 → 工具 → 父类 → 依赖组件）\n- 添加清晰的分组注释\n- 保持原有初始化逻辑不变\n\n## 可选步骤\n\n1. **性能优化**：如果重构影响性能，进行必要的优化\n2. **添加单元测试**：为重构的代码添加单元测试\n3. **代码审查**：邀请同事进行代码审查\n4. **更新文档**：更新API文档或设计文档",
  "scope": "project"
}
