{
  "problem_type": "CLI命令开发",
  "content": "# CLI命令开发方法论\n\n## 问题重述\n如何在Jarvis项目中创建一个与jvs、jca等同级别的独立CLI命令，用于实现特定功能。\n\n## 可复用解决流程\n\n### 步骤1：创建模块目录结构\n在`src/jarvis/`下创建独立模块目录，通常包含以下文件：\n- `__init__.py`：模块初始化文件，导出主要接口\n- `config.py`（可选）：配置定义\n- `core.py`：核心业务逻辑\n- `cli.py`：CLI命令入口\n\n```bash\nmkdir -p src/jarvis/jarvis_<module_name>\n```\n\n### 步骤2：实现核心逻辑\n在`core.py`中实现核心功能类，遵循面向对象设计原则。\n\n### 步骤3：创建CLI接口\n在`cli.py`中使用typer创建CLI应用：\n```python\nimport typer\nfrom jarvis.jarvis_utils.output import PrettyOutput\n\napp = typer.Typer(help=\"命令描述\")\n\n@app.command()\ndef main(\n    param1: str = typer.Argument(None, help=\"参数说明\"),\n    option1: bool = typer.Option(False, \"--option\", \"-o\", help=\"选项说明\")\n) -> None:\n    \"\"\"命令功能描述\"\"\"\n    # 实现命令逻辑\n    pass\n\nif __name__ == \"__main__\":\n    main()\n```\n\n使用PrettyOutput提供友好的彩色输出：\n- `PrettyOutput.auto_print()`：自动选择输出类型\n- `PrettyOutput.print(content, OutputType.TYPE)`：指定输出类型\n\n### 步骤4：注册命令到pyproject.toml\n在`[project.scripts]`部分添加命令注册：\n```toml\njarvis-<module-name> = \"jarvis.jarvis_<module_name>.cli:main\"\n<short-name> = \"jarvis.jarvis_<module_name>.cli:main\"\n```\n遵循命名规范：提供完整命令名和短命令名。\n\n### 步骤5：静态检查和测试\n- 使用mypy进行类型检查\n- 使用ruff进行代码风格检查\n- 通过`python3 -m jarvis.jarvis_<module_name>.cli`测试功能\n- 安装项目：`pip install -e .`\n\n## 注意事项\n1. **类型注解**：使用正确的类型注解，避免`any`，应使用`Any`\n2. **导入顺序**：标准库 -> 第三方库 -> 本地模块\n3. **参数命名**：避免与内置模块名称冲突（如`json`参数应改为`as_json`）\n4. **输出类型**：使用OutputType枚举值（INFO, CODE, ERROR等），不要使用不存在的类型\n5. **f-string**：不包含占位符时不要使用f前缀\n6. **主函数**：定义`main()`函数并在`if __name__ == \"__main__\"`中调用\n\n## 可选步骤\n1. **JSON输出**：添加`--json`/-j选项支持JSON格式输出\n2. **子命令**：使用typer的子命令功能组织复杂CLI\n3. **配置文件**：支持配置文件自定义行为\n4. **安装检查**：检测依赖工具是否安装并提供安装建议\n\n## 验证标准\n- 模块结构清晰，职责分明\n- CLI命令功能正常，输出友好\n- 通过所有静态检查\n- 命令可在终端直接调用",
  "scope": "project"
}