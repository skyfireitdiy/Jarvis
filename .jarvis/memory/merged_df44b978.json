{
  "content": "Oh-Sec 安全分析系统架构设计：混合扫描工作流与CLI命令体系\n\n【混合扫描工作流设计（2025-10-19）】\n\n【核心原则】\n在 src/jarvis/oh_sec 中，即使是 agent 模式也不能完全交由 agent 执行，应先进行正则扫描获得候选问题，然后将扫描结果拆分为原子化子任务，交给 agent 逐项分析与验证。\n\n【工作流架构】\n需要在现有流程中加入\"扫描->子任务切分->agent分发->结果汇总\"，并保持本地静态规则与报告生成的兼容性与稳定性。\n\n【实施策略】\n- 正则扫描：使用本地静态规则快速识别潜在安全问题\n- 子任务切分：将扫描结果拆分为原子化、可独立处理的任务单元\n- Agent分发：将子任务分配给相应的 agent 进行深度分析与验证\n- 结果汇总：聚合 agent 分析结果，生成统一的安全报告\n\n【设计约束】\n- 保持本地静态规则的兼容性与稳定性\n- 确保 agent 分析的准确性与一致性\n- 支持增量处理与断点恢复\n- 维护报告生成的标准化流程\n\n【CLI命令体系】\n\n【命令集合】\n- init / scan / plan / fix / rewrite / test / bench / report\n\n【功能要求】\n- 结构化日志：统一的日志格式与级别管理\n- 错误码：标准化的错误返回码体系\n- 可复现测试：支持测试用例的生成与执行\n- 演示脚本：提供完整的演示与验证脚本\n- 增量分析：支持断点续跑与增量处理\n\n【系统集成】\n- 扫描阶段：使用正则规则进行快速问题识别\n- 分析阶段：Agent进行深度验证与风险评估\n- 处理阶段：支持修复、重写、测试等完整流程\n- 报告阶段：生成标准化的安全分析报告\n\n【设计原则】\n- 渐进分析：先扫描后验证，提高效率\n- 任务分解：原子化子任务，便于并行处理\n- 质量保证：结合静态规则与AI分析的优势\n- 用户友好：完整的CLI接口与文档支持\n- 可扩展性：支持新规则与新Agent的添加\n\n【预期效果】\n- 提高安全分析的效率与准确性\n- 减少重复分析与资源浪费\n- 建立可扩展的安全分析工作流\n- 确保分析结果的可追溯性与可验证性\n- 提供完整的CLI工具链支持",
  "tags": [
    "oh-sec",
    "workflow",
    "agent",
    "cli",
    "subtasks",
    "regex",
    "security_analysis",
    "hybrid_scanning",
    "task_decomposition",
    "automated_security"
  ],
  "type": "project_long_term",
  "merged_from": ["20251019_092731_063192", "20251019_111420_024258"],
  "id": "merged_df44b978",
  "created_at": "2025-11-12T23:49:22.057111"
}
