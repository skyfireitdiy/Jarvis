{
  "id": "20260131_192700_796251",
  "type": "project_long_term",
  "tags": ["evolution", "phase2", "methodology", "系统分析", "架构"],
  "content": "## 方法论系统架构分析报告\n\n### 1. 系统架构概览\n\n方法论系统由以下组件构成：\n\n```\n┌─────────────────────────────────────────────────────────┐\n│                    方法论系统架构                         │\n├─────────────────────────────────────────────────────────┤\n│  工具层                                                  │\n│  ├── MethodologyTool (jarvis_tools/methodology.py)      │\n│  │   └── 提供add/update/delete操作                       │\n│  └── load_methodology (jarvis_utils/methodology.py)     │\n│      └── 加载和推荐方法论                                 │\n├─────────────────────────────────────────────────────────┤\n│  存储层                                                  │\n│  ├── 项目级: .jarvis/methodologies/*.json               │\n│  ├── 全局级: ~/.jarvis/methodologies/*.json             │\n│  └── 中心仓库: 可配置的Git仓库                           │\n├─────────────────────────────────────────────────────────┤\n│  CLI层                                                   │\n│  └── jarvis_methodology/main.py                         │\n│      └── 提供import/export/list命令                      │\n└─────────────────────────────────────────────────────────┘\n```\n\n### 2. 方法论JSON结构\n\n```json\n{\n  \"problem_type\": \"问题类型名称（如：Python代码依赖分析实施）\",\n  \"content\": \"方法论内容（Markdown格式，包含规则简介、原则、操作步骤等）\",\n  \"scope\": \"project 或 global\"\n}\n```\n\n**文件命名规则**：使用problem_type的MD5哈希作为文件名，避免特殊字符问题。\n\n### 3. 核心接口\n\n**MethodologyTool.execute(args)**：\n- operation: add/update/delete\n- problem_type: 问题类型\n- content: 方法论内容\n- scope: global/project\n\n**load_methodology(user_input, tool_registry)**：\n1. 加载所有方法论（项目级优先）\n2. 使用LLM选择相关方法论\n3. 基于token限制筛选（最多3条）\n4. 生成执行步骤建议\n\n### 4. 优先级机制\n\n1. 项目级方法论（.jarvis/methodologies/）\n2. 全局方法论（~/.jarvis/methodologies/）\n3. 配置的外部目录\n4. 中心方法论仓库\n\n### 5. 可扩展点\n\n1. **方法论生成**：当前只有手动添加，可扩展为自动生成\n2. **方法论推荐**：当前使用LLM选择，可增强语义匹配\n3. **方法论质量评估**：当前无质量评估机制\n4. **方法论版本管理**：当前无版本控制\n5. **方法论关联**：当前方法论之间无关联关系\n\n### 6. 后续开发建议\n\n1. **自动生成器**：创建`jarvis_methodology_generator`模块\n   - 分析任务执行过程\n   - 提取关键步骤和决策\n   - 生成符合格式的方法论\n\n2. **质量评估**：\n   - 完整性检查（是否包含必要章节）\n   - 可执行性检查（步骤是否清晰）\n   - 重复性检查（是否与现有方法论重复）\n\n3. **集成方式**：\n   - 复用现有MethodologyTool的add接口\n   - 复用现有JSON格式\n   - 复用现有存储机制",
  "created_at": "2026-01-31T19:27:00.796276",
  "updated_at": "2026-01-31T19:27:00.796280"
}
