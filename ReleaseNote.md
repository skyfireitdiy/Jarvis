### Release Note - v0.4.1 2025-10-11

#### **新功能 (Features)**
- **Web UI 重大升级**: 引入了基于 PTY 的全功能交互式终端，彻底取代了原有的输入框，现在您可以在 Web 界面中获得与本地一致的完整 Shell 体验。
- **内置文件操作**: 新增了 `REWRITE` 和 `PATCH` 作为内置文件操作指令，取代了原有的 `rewrite_file` 和 `edit_file` 工具，使文件修改更可靠、更标准化。
- **全新多智能体：小说生成器**: 新增了一个名为 `novel_generator` 的多智能体工作流，能够从零开始，通过角色设计、大纲构建、章节写作、润色校对等完整流水线，自动生成小说。
- **安全演进流程增强**: 对 `security_evolution` 多智能体进行了大幅升级，引入了 "Rust-first" 原则、断点续跑能力以及更详尽的度量与报告机制。

#### **修复 (Fixes)**
- **Agent总结提示词**: 修复了当 `summary_prompt` 为空时可能导致执行失败的问题，增强了Agent任务总结的稳定性。
- **多智能体消息传递**: 修复了 `SEND_MESSAGE` 格式错误时难以排查的问题，现在提供了极其健壮的校验和清晰的修复指导。

#### **优化与重构 (Refactors & Improvements)**
- **Agent非交互模式**: 为 Agent 添加了 `non_interactive` 构造参数，使得子 Agent 可以方便地继承父 Agent 的运行模式。
- **配置与启动**: 新增 `JARVIS_SKIP_PREDEFINED_TASKS` 环境变量，允许用户跳过预定义任务的加载以加速启动。
- **多智能体框架**: 增加了 `common_system_prompt`，允许为工作流中的所有智能体设置通用指令；同时支持在智能体发送消息后自动清理其历史记录，优化内存占用。
- **UI提示优化**: 在多智能体场景下，"正在思考" 和 "模型输出" 等状态提示会明确显示当前正在工作的智能体名称，提升了透明度。
- **代码整洁**: 全面移除了已废弃的 `edit_file` 和 `rewrite_file` 工具，并统一更新了内置 Agent 的配置。

#### **文档更新 (Documentation)**
- **附录更新**: 在文档中补充了关于 `JARVIS_SKIP_PREDEFINED_TASKS` 的说明。
- **图片更新**: 更新了文档中的微信联系方式图片。

本次更新是一次重大的功能和体验升级，核心是引入了全新的 Web 交互式终端和强大的 `REWRITE`/`PATCH` 文件操作能力，同时新增了富有创造力的小说生成器，并对底层的多智能体框架和安全性分析流程进行了深度优化，让 Jarvis 更加强大和易用。

### Release Note - v0.4.0 2025-10-08

#### **新功能 (Features)**
- **Web 交互模式**: 新增 `--web` 模式，允许通过浏览器与 Jarvis 交互。支持实时标准输入/输出重定向、多任务并行处理和远程访问，极大地提升了交互体验和便利性。
- **非交互模式**: 为 `jvs`, `jca`, `jma` 等多个命令添加 `-n` / `--non-interactive` 参数，用于在 CI/CD 或自动化脚本中无人值守运行，增强了自动化能力。
- **安装脚本增强**: `install.sh` 脚本新增了为所有 `j*` 命令自动安装命令行补全功能的选项，提升了日常使用效率。
- **后台服务管理**: 增强了 Web 模式后台服务的停止逻辑 (`--stop`)，在 PID 文件丢失的情况下，会尝试按端口号查找并停止进程，提高了服务的健壮性。
- **Web 终端显示**: 在 Web 模式下，会自动上报并设置终端宽度，优化了表格、进度条等内容的换行和显示效果。

#### **优化与重构 (Refactors & Improvements)**
- **Agent 初始化**: 简化了 `Agent` 的初始化逻辑，内部处理了输入处理器 (`input_handler`) 的加载，降低了模块间耦合度。
- **Web 架构**: 引入了 `web_bridge`、`stdio_redirect` 等模块，构建了基于 FastAPI 和 WebSocket 的前后端分离架构，实现了 Agent 内核与 Web UI 的解耦。
- **配置调整**: 调整了 `max_token_count` 的计算逻辑，使其更加合理。

#### **文档更新 (Documentation)**
- **使用指南**: 详细更新了 `4.使用指南.md`，全面介绍了新增的“非交互模式”和“Web 模式”的使用方法、核心特性和常用参数。

### Release Note - v0.3.34 2025-10-07

#### **新功能 (Features)**  
- 新增通用的基础软件库安全演进多智能体配置(security_evolution.yaml)，支持更灵活的安全分析流程

#### **优化与重构 (Refactors & Improvements)**  
- 重构安全演进多智能体架构，将OpenHarmony专用版本升级为通用版本
- 优化多智能体协作流程
- 增强非交互模式支持，添加脚本执行超时控制

#### **文档更新 (Documentation)**  
- 更新Jarvis手册，新增非交互模式和脚本超时配置说明

本次更新主要优化了安全演进多智能体系统的通用性和可靠性，同时增强了非交互模式下的稳定性。

### Release Note - v0.3.33 2025-10-04

#### **新功能 (Features)**
- **新增“产品宣传软文专家” Agent**：新增一个内置Agent，专为产品推广设计，能够根据产品信息和目标受众撰写高质量的营销文案。
- **新增“OpenHarmony安全演进”多智能体工作流**：为OpenHarmony基础软件库提供一个从代码理解、风险评估到代码生成和验证的全流程安全演进方案。
- **新增文件上下文自动处理**：现在，当你在输入中通过 `'path/to/file'` 引用一个本地文件路径时，系统会自动读取文件内容并将其作为上下文，无需手动复制粘贴。
- **新增会话历史记录功能**：通过设置 `JARVIS_SAVE_SESSION_HISTORY=true`，可以将完整的对话历史（用户输入和模型输出）保存到日志文件中，便于复盘和问题追踪。

#### **修复 (Fixes)**
- 修复了 `--restore-data` 选项在处理包含 `~` 或环境变量的路径时解析失败的问题。
- 修复了内置配置选择器（`JARVIS_ENABLE_STARTUP_CONFIG_SELECTOR`），增加了“跳过”选项，避免在不想选择时中断流程。
- 修复了网页读取（`read_webpage`）和网络搜索（`search_web`）工具在某些情况下返回空的成功结果的问题，现在只有在获取到有效内容时才会返回成功。
- 修复了 `make_book.sh` 脚本中的硬编码路径，改用相对路径，增强了脚本的可移植性。

#### **优化与重构 (Refactors & Improvements)**
- **Agent汉化与体验优化**：对多个内置Agent（如架构图生成器、心理学专家等）进行了汉化重命名，提升了中文用户的可读性和使用体验。
- **多智能体协作增强**：在多智能体工作流中，Agent间的消息传递会附带上一轮工作的摘要，显著提升了协作的上下文传递效率和准确性。
- **Agent能力提醒机制**：Agent在长时间运行中会周期性地获得可用工具的提醒，这有助于模型在复杂任务中保持对自身能力的认知，减少“幻觉”。
- 优化了 `build_pdf.sh` 脚本，增强了依赖自动检查与安装功能，使其更加健壮和易用。

#### **文档更新 (Documentation)**
- 新增一篇推广文章，详细阐述了Jarvis“动态检索+分层记忆”的设计理念，区别于传统的“整库索引”方案。
- 更新了附录文档，增加了关于 `JARVIS_SAVE_SESSION_HISTORY` 环境变量的说明。
- 更新了项目文档中的微信交流群二维码。

本次更新重点提升了系统的智能化、易用性和稳定性，通过引入文件上下文自动处理和会话历史记录等实用功能，进一步降低了用户的使用门槛。同时，对核心Agent和脚本的优化，使得Jarvis在处理复杂任务和长期交互时表现更加可靠。

### Release Note - v0.3.32 2025-09-29

#### **新功能 (Features)**
- **(agent) 新增架构图生成器**: 引入了一个全新的 `ArchitectureDiagramGenerator` Agent，能够自动分析代码库，并生成包括逻辑视图、实现视图、部署视图在内的多种专业架构图。
- **(cli) 新增数据备份与恢复**: 在主命令 `jvs` 中加入了 `--backup-data` 和 `--restore-data` 选项，方便用户一键备份和恢复 `~/.jarvis` 中的所有数据。
- **(platform) 增强OpenAI集成**: 支持通过 `OPENAI_API_BASE` 环境变量自定义 OpenAI 的 API 地址，并通过 `OPENAI_EXTRA_HEADERS` 注入额外的 HTTP 头，极大地提升了与第三方代理或企业内部平台的集成灵活性。

#### **修复 (Fixes)**
- **(git_utils) 修正差异解析**: 移除了 `git show` 命令中不必要的 `-U0` 参数，解决了可能导致代码修改行范围解析不准确的问题。
- **(input) 优化快捷键响应**: 将 `Ctrl+T` (自定义命令) 的绑定设置为 `eager` 模式，确保其在输入处理中拥有最高优先级，避免被其他按键覆盖。

#### **优化与重构 (Refactors & Improvements)**
- **(edit_file) 升级区间替换逻辑**: `edit_file` 工具的区间替换功能被重构，现在会从起始标记所在行的行首一直替换到结束标记所在行的行尾。这使得替换操作更符合直觉，并能更好地保持代码的对齐和格式。
- **(utils) 提升日志可观测性**: 增强了 `while_success` 重试辅助函数，现在当发生异常时，会在重试日志中直接打印详细的异常信息，便于快速定位问题。

#### **文档更新 (Documentation)**
- **(architecture) 添加完整架构视图**: 项目文档中新增了使用新工具生成的全套架构图（`.dot` 源码和 `.png` 图片），全面展示了系统的逻辑、实现、进程、部署和用例视图。
- **(jarvis_book) 全面内容更新**:
  - 在使用指南中添加了数据备份与恢复、自定义 OpenAI 等新功能的详细说明。
  - 新增 FAQ 章节，解答关于自定义 API 地址和 HTTP 头的常见问题。
  - 调整了多个章节的编号和顺序，使文档结构更合理。
  - 修正了示例代码中 RAG 组名的错误。

本次更新是一次重要的功能增强和体验优化。核心亮点是**架构图的自动化生成**，它将极大地提升团队对项目代码的理解效率。同时，**数据备份恢复**和**更灵活的平台配置**为企业级应用和个人数据安全提供了坚实保障。

### Release Note - v0.3.31 2025-09-27

#### **新功能 (Features)**  
- 新增代码反构设计专家智能体（CodeReverseDesignExpert），支持阅读代码并输出详细设计方案，助力功能对齐的重构
- 新增麦肯锡风格管理咨询顾问智能体（McKinseyConsultant），系统化分析业务问题并提供可落地解决方案
- 新增 SecurityVulnerabilityAnalyst 方案文档，系统介绍漏洞分析专家的定位、流程、架构与量化效益
- 新增补丁格式控制配置（JARVIS_PATCH_FORMAT），支持 all/search/search_range 三种模式，提升代码修改稳定性与灵活性
- 新增多目录加载配置项：JARVIS_METHODOLOGY_DIRS、JARVIS_AGENT_DEFINITION_DIRS、JARVIS_MULTI_AGENT_DIRS、JARVIS_CENTRAL_METHODOLOGY_REPO，扩展资源加载能力
- 新增工具调用标签行首匹配校验机制，增强鲁棒性，自动补全缺失结束标签
- 新增大输出自动上传或智能截断机制，防止上下文溢出
- 新增代码代理按文件展示 diff 功能，优化变更可视化体验
- 新增模型空响应防御机制，避免 None 或空字符串导致的异常

#### **修复 (Fixes)**  
- 修复代码代理中 git reset 操作缺少用户确认的问题，防止误操作
- 修复配置文件默认值与平台差异不一致的问题（如 Windows 下 JARVIS_PRETTY_OUTPUT 默认关闭）
- 修复内存占用优化：read_code 工具采用流式读取，降低大文件加载内存消耗
- 修复 git show 命令输出过大导致的解析性能问题，采用 -U0 参数减少上下文
- 修复文件哈希与行数统计的内存占用问题，采用流式处理提升性能

#### **优化与重构 (Refactors & Improvements)**  
- 重构 ToolRegistry 工具调用解析逻辑，强化行首标签匹配，提升容错能力
- 重构 EditFileHandler 补丁处理机制，支持 RANGE 限定行号范围与区间替换模式
- 重构代码代理提交信息展示逻辑，按文件展示 diff，删除文件仅提示，提升可读性
- 优化内存系统默认行为，将 JARVIS_FORCE_SAVE_MEMORY 默认设为 false，减少冗余提示
- 优化配置交互体验，新增补丁格式选择与说明，适配不同模型能力
- 优化愿景与使命表述，更加简洁聚焦开发者与 AI 的共生关系

#### **文档更新 (Documentation)**  
- 更新核心概念与架构文档，精简 MCP 工具配置细节，新增工具加载与兼容性概览
- 更新使用指南，移除记忆管理技巧重复内容，聚焦高级用法
- 更新附录配置表，补充新增配置项说明与默认值调整
- 新增高级主题章节，详细介绍补丁格式控制配置的使用方法与注意事项

#### **其他 (Miscellaneous)**  
- 调整多个智能体配置文件，补充 execute_script 与 read_code 工具支持
- 统一配置 schema 默认值与代码逻辑一致性，提升配置健壮性
- 优化 CLI 启动输出内容，提升品牌识别度与用户体验

本次更新围绕智能体生态扩展、代码修改稳定性、系统性能与用户体验四大方向展开，新增两位专业智能体与漏洞分析方案，强化补丁机制与工具调用鲁棒性，优化内存与性能表现，并完善文档与配置体系，为后续功能演进与社区协作奠定更坚实的基础。

### Release Note - v0.3.30 2025-09-20

#### **新功能 (Features)**  
- 新增工具调用后回调扩展（after_tool_call_cb），支持动态加载多个回调函数
- 支持通过配置文件指定回调目录（JARVIS_AFTER_TOOL_CALL_CB_DIRS），自动扫描并注册回调
- 新增回调注册约定：模块级可调用对象、工厂函数get_after_tool_call_cb()和register_after_tool_call_cb()
- 新增事件总线集成，回调在AFTER_TOOL_CALL事件广播前后依次触发
- 新增配置项JARVIS_AFTER_TOOL_CALL_CB_DIRS，支持~和环境变量展开

#### **优化与重构 (Refactors & Improvements)**  
- 重构Agent初始化逻辑，支持动态加载工具调用后回调
- 优化代码代理工具执行记录机制，使用事件总线替代直接回调
- 优化依赖安装逻辑，优先使用虚拟环境内的uv，其次PATH中的uv
- 优化更新检测逻辑，优先检测虚拟环境内的uv可用性
- 优化git仓库更新逻辑，增强uv环境检测准确性

#### **文档更新 (Documentation)**  
- 更新高级主题文档，新增工具调用后回调扩展详细说明
- 更新配置文件附录，新增JARVIS_AFTER_TOOL_CALL_CB_DIRS配置项说明

#### **其他 (Miscellaneous)**  
- 修复generate_new_tool工具中依赖安装命令，支持uv和pip双路径
- 修复git_utils中uv环境检测逻辑，优先检测虚拟环境内的uv
- 修复utils.py中uv可用性检测，增强uv路径识别准确性

本次更新主要增强了工具调用后的扩展能力，支持动态加载回调函数，同时优化了uv环境检测和依赖安装逻辑，提升了系统的灵活性和稳定性。

### Release Note - v0.3.29 2025-09-17

#### **新功能 (Features)**  
- 新增 Jarvis 系统架构图 PlantUML 更新，细化组件职责与交互流程
- 新增事件总线（EventBus）机制，支持任务生命周期事件广播与旁路扩展
- 新增运行循环（AgentRunLoop）独立类，解耦主循环逻辑，支持 LoopAction 控制流程
- 新增提示管理器（PromptManager）集中管理系统提示词与附加提示构建
- 新增 AgentConfig 配置聚合类，统一解析初始化参数与默认值处理
- 新增用户交互封装（UserInteractionHandler），便于未来 UI 替换
- 新增工具执行器（ToolExecutor）统一解析模型响应并执行工具调用
- 新增输出处理器协议（OutputHandlerProtocol），支持扩展非工具类响应处理
- 新增任务管理器（TaskManager）支持 fzf 交互式任务选择与补充信息追加
- 新增事件常量定义模块（events.py），规范事件名与载荷类型提示
- 新增工具函数模块（utils.py），提供 join_prompts、is_auto_complete、normalize_next_action 等统一实现
- 新增对 Python 3.8+ 的类型兼容性处理（如 List[str]、Optional[str] 等）
- 新增可编辑安装检测函数（is_editable_install），支持 PEP 610 与 .egg-link 回退
- 新增内存管理器事件订阅机制，支持在任务开始/历史清理/任务完成时自动保存记忆
- 新增 Git 工具提交前缀/后缀支持（--prefix/--suffix），增强提交信息规范性
- 新增内置配置选择器（--builtin-config-selector），支持 agent/multi_agent/roles 交互式切换
- 新增交互式配置向导（--interactive-config），支持当前配置基础上逐项确认与修改
- 新增禁用方法论分析选项（--disable-methodology-analysis），支持快速指令式对话
- 新增统计工具（jst）命令扩展：remove、--width、--height、--agg 等参数支持
- 新增文档构建脚本优化，支持代码块外列表空行自动修正与表格格式统一

#### **优化与重构 (Refactors & Improvements)**  
- 重构 Agent 初始化流程，引入 EventBus、PromptManager、AgentConfig 等组件
- 重构主运行循环为 AgentRunLoop，支持事件广播与回调隔离
- 重构工具调用流程，统一使用 ToolExecutor 解析与执行，支持协议版本分发（v1.0/v2.0）
- 重构提示拼接逻辑，统一使用 join_prompts 避免空段落与格式错误
- 重构自动完成检测逻辑，统一使用 is_auto_complete 支持 ot() 与字面量回退
- 重构下一步动作解析，统一使用 normalize_next_action 支持 Enum 与字符串兼容
- 重构事件广播逻辑，统一使用事件常量（如 BEFORE_TOOL_CALL、TASK_COMPLETED 等）
- 重构文件与方法论管理器，支持平台能力判断与本地/上传模式自动选择
- 重构记忆系统，支持 force_save_memory 配置与事件驱动自动保存
- 重构统计模块默认展示逻辑，支持全历史数据展示与智能时间范围推断
- 重构代码静态分析工具链，将 black 替换为 ruff 提升格式化效率
- 重构开发依赖配置，移除 isort 并统一使用 ruff 进行代码格式化
- 优化 CLI 启动流程，支持预加载配置、Git 仓库检测、内置配置选择等交互
- 优化平台加载顺序，明确“用户目录优先于内置目录”的覆盖机制
- 优化 MCP 工具配置加载逻辑，优先使用 JARVIS_MCP 配置，回退扫描 mcp 目录
- 优化工具注册表加载逻辑，支持协议版本分发与异常隔离
- 优化输出处理器链，支持多处理器协同与优先级处理
- 优化文档结构，统一术语表述与配置项说明，修正章节编号错误

#### **修复 (Fixes)**  
- 修复特殊指令文档中 `@` 符号误用为 `'<...>'` 的问题
- 修复 CLI 参数 `-t` 被误用为任务参数的问题，统一改为 `-T/--task`
- 修复配置文件附录中章节编号错误（如 8.x -> 7.x）
- 修复事件广播中硬编码字符串导致的潜在漂移问题
- 修复工具调用中 agent 参数注入逻辑不兼容 v2.0 协议的问题
- 修复文件编辑工具中类型注解不一致的问题（如 list[str] -> List[str]）
- 修复统计工具中时间范围参数失效的问题（如 --days/--hours 不支持）
- 修复记忆保存提示重复触发的问题，引入去重标记与事件隔离
- 修复可编辑安装检测失败的问题，增强 PEP 610 与 .egg-link 兼容性
- 修复 Git 提交工具中路径校验过于严格导致进程退出的问题
- 修复多行输入帮助提示中过时快捷键说明的问题
- 修复文档中表格格式不一致的问题，统一表头前空行处理
- 修复代码中类型注解不兼容 Python 3.8 的问题（如 str | None -> Optional[str]）

#### **文档更新 (Documentation)**  
- 更新系统架构图，细化组件职责与交互流程，补充事件机制说明
- 更新核心概念章节，新增记忆系统与事件总线介绍
- 更新使用指南，补充 CLI 参数变更与交互式配置说明
- 更新功能扩展章节，补充 MCP 工具配置、平台加载顺序、协议版本说明
- 更新高级主题章节，补充事件常量、输出处理器、记忆系统使用示例
- 更新配置文件附录，新增 JARVIS_PRETTY_OUTPUT、JARVIS_FORCE_SAVE_MEMORY 等默认值调整
- 更新统计工具使用说明，补充 remove、--agg、--width、--height 等参数用法
- 更新方法论模板，优化“可复用解决流程”表述，避免绑定特定上下文
- 更新代码注释与 docstring，统一使用英文保持项目一致性

#### **其他 (Miscellaneous)**  
- 调整 JARVIS_PRETTY_OUTPUT 默认值为 true（非 Windows 平台）
- 调整 JARVIS_FORCE_SAVE_MEMORY 默认值为 false，避免频繁提示
- 调整默认输出格式，优化长文本展示与溢出处理逻辑
- 调整 Git 检查模式默认行为，支持 strict/warn 模式配置
- 调整工具筛选阈值默认值为 30，降低大规模工具集干扰
- 调整代码格式化策略，统一使用 ruff 替换 black 与 isort
- 调整文档构建流程，支持 PlantUML 渲染与格式自动修正
- 调整内存管理器事件订阅机制，支持异常隔离与回调保护
- 调整平台加载逻辑，支持用户自定义平台覆盖内置实现
- 调整子 Agent 工具参数继承机制，增强配置显式传递与校验

本次更新围绕“架构清晰化、事件驱动、交互友好、配置灵活”四大目标，完成了 Jarvis 核心组件的全面模块化重构。通过引入事件总线、运行循环、提示管理器等新机制，系统具备了更强的扩展性与可维护性；通过优化 CLI 交互、配置向导、任务选择等体验，用户操作更加直观高效；通过统一工具协议、提示拼接、类型注解等细节，代码质量与兼容性显著提升。此次升级为后续功能拓展（如 WebUI、插件市场、多模态交互）奠定了坚实基础，标志着 Jarvis 从“功能型助手”向“平台型智能体”迈出了关键一步。


### Release Note - v0.3.28 2025-09-10

#### **新功能 (Features)**  
- 新增命令行参数 `--disable-methodology-analysis`（简写 `-D`），支持一键禁用方法论和任务分析功能
- Agent 启动统计信息新增展示平台名称，提升多平台使用时的识别度
- 子 Agent（sub_agent/sub_code_agent）新增模型有效性校验与自动回退机制，增强模型兼容性
- Git 提交工具新增对 `model_group` 参数的支持，完善代码代理的模型上下文传递

#### **修复 (Fixes)**  
- 修复若干处未使用变量的代码警告，提升代码整洁度
- 修复若干处 f-string 无变量引用的问题，避免潜在的性能损耗
- 修复 `typer` 选项默认值与布尔判断不一致的问题，确保配置正确生效
- 修复 `VirtualTTYTool` 中平台相关导入警告，优化跨平台兼容性
- 修复 `while_success`/`while_true` 重试提示信息不明确的问题，增强可观测性

#### **优化与重构 (Refactors & Improvements)**  
- 重构模型配置解析逻辑，明确 `model_group_override` 时的优先级策略，支持组配置与全局环境变量的灵活覆盖
- 优化自动更新检测机制，支持 `uv` 和 `pip` 的自动升级并提示重启，提升用户体验
- 优化异常处理逻辑，移除不必要的异常捕获与打印，减少噪音日志
- 统一多处字符串格式化风格，提升代码可读性和一致性
- 清理大量未使用导入，减少模块耦合和加载时间

#### **文档更新 (Documentation)**  
- 更新配置说明，补充 `model_group_override` 的优先级逻辑注释
- 删除过时测试文件与冗余代码，保持项目结构清晰

#### **其他 (Miscellaneous)**  
- 删除重复 `X-Requested-With` 请求头，精简 HTTP 请求
- 补充缺失的异常处理分支，增强健壮性

本次更新主要增强了配置灵活性和模型兼容性，优化了自动更新与异常处理体验，并大规模清理了代码质量细节，为后续功能扩展奠定更坚实的基础。

### Release Note - v0.3.27 2025-09-07

#### **新功能 (Features)**  
- 新增PPT设计专家智能体(PptDesignExpert)，支持用户需求沟通、宏观结构设计、单页内容设计和视觉呈现强化
- 新增潜意识植入助手智能体(SubliminalMessageExpertAgent)，基于心理学原理设计潜意识植入计划
- 新增fzf交互式选择支持，提升角色和配置选择体验
- 新增Git检查模式配置(JARVIS_GIT_CHECK_MODE)，支持strict和warn模式
- 新增事件总线(EventBus)机制，支持任务生命周期事件广播
- 新增PromptManager集中管理系统提示词与附加提示词构建逻辑
- 新增AgentConfig配置聚合类，提供统一配置解析与默认值管理
- 新增AgentRunLoop独立运行循环类，解耦主循环逻辑
- 新增UserInteractionHandler用户交互封装，便于后续UI替换

#### **优化与重构 (Refactors & Improvements)**  
- 重构Agent初始化配置逻辑，支持更灵活的参数解析与默认值处理
- 优化代码代理工具执行记录机制，精确追踪工具调用情况
- 优化子Agent工具参数校验与继承机制，增强配置显式传递
- 优化统计模块默认展示逻辑，支持全历史数据展示与智能时间范围推断
- 优化平台输出文本溢出处理逻辑，提升长文本展示效果
- 优化Git提交工具模型与平台获取逻辑，优先使用传入Agent实例
- 优化内存管理器工具执行判断逻辑，基于实际执行记录而非响应内容
- 优化while_success与while_true重试逻辑，增加最大重试次数限制
- 优化代码静态分析工具链，将black替换为ruff提升效率
- 优化开发依赖配置，移除isort并统一使用ruff进行代码格式化

#### **文档更新 (Documentation)**  
- 更新配置文件附录，新增JARVIS_GIT_CHECK_MODE配置项说明

#### **其他 (Miscellaneous)**  
- 修复ReleaseNote版本号显示错误
- 修复提交历史展示逻辑，限制显示最近5条提交
- 修复子代码代理中Git配置校验过于严格导致进程退出的问题
- 修复多行输入帮助提示中过时快捷键说明

本次更新主要增强了智能体生态，新增PPT设计与心理学应用专家智能体，同时大幅优化了配置管理、事件驱动、交互体验与代码质量基础设施，为后续功能扩展奠定更坚实的基础。

### Release Note - v0.3.26 2025-08-31

#### **新功能 (Features)**  
- 新增儿童心理学专家智能体(ChildPsychologyExpertAgent)，为家长提供专业育儿指导
- 新增人生顾问智能体(LifeConsultantAgent)，持续建立用户性格画像并提供个性化决策建议
- 新增心理学分析专家智能体(PsychologyExpertAgent)，从心理学角度提供问题解决方案
- 新增PUA专家智能体(PuaExpertAgent)，提供基于尊重的沟通策略和心理分析
- RAG知识库新增`retrieve`子命令，支持仅检索文档而不生成答案

#### **优化与重构 (Refactors & Improvements)**  
- 增强RAG依赖检测机制，提供更精确的模块缺失提示
- 优化智能体记忆管理，支持强制保存记忆功能
- 改进RAG安装检测逻辑，使用更准确的依赖检查方法

#### **文档更新 (Documentation)**  
- 更新使用指南文档，新增RAG `retrieve`命令的详细使用说明
- 补充新智能体的功能描述和使用场景

本次更新主要引入了多个专业领域的心理学智能体，为用户提供更精准的个性化建议和支持，同时增强了RAG系统的稳定性和用户体验。

### Release Note - v0.3.25 2025-08-30

#### **新功能 (Features)**
- **新增安全漏洞分析Agent**: 引入 `security_vulnerability_analyst` 专家，专注于分析代码中的逻辑和安全漏洞。
- **增强RAG查询能力**: 在 RAG 检索流程中增加了 `--rewrite/--no-rewrite` 选项，允许用户控制是否启用大模型查询重写，以优化检索效果。
- **灵活的模型组环境变量配置**: `JARVIS_LLM_GROUPS` 现已支持 `ENV` 字段，允许为特定的模型组配置覆盖全局的环境变量，实现了更灵活的多模型密钥管理。
- **新增AI工具筛选阈值配置**: 在交互式配置向导中增加了 `JARVIS_TOOL_FILTER_THRESHOLD` 选项，当可用工具数量超过此阈值时将触发AI进行筛选。

#### **优化与重构 (Refactors & Improvements)**
- **模型加载优化**: 大幅改善了本地嵌入模型和重排模型的加载逻辑，优先从本地缓存加载，避免不必要的网络请求，并为加载失败提供了更清晰的错误提示。
- **交互式输出体验提升**: 优化了AI平台的流式输出显示，增加了 "思考中..." 状态提示，并改进了渲染机制以减少界面闪烁，提升了用户体验。
- **代码质量提升**: 对项目中的多个模块进行了类型提示的增强和代码清理，包括 `jarvis.py`, `edit_file.py`, `sub_agent.py` 等，提升了代码的健壮性和可维护性。
- **底层工具调用修正**: 修复了在 `git_commiter.py` 中 `subprocess` 调用缺少 `text=True` 参数的问题，确保了跨平台的文本编码一致性。
- **通用工具函数优化**: 移除了 `while_success` 和 `while_true` 工具函数中冗余的重试日志，使输出更简洁。

#### **文档更新 (Documentation)**
- **更新了附录文档**: 详细说明了 `JARVIS_LLM_GROUPS` 中新增的 `ENV` 环境变量覆盖功能，并提供了配置示例。
- **更新了联系方式图片**: 替换为最新的微信联系二维码。


### Release Note - v0.3.24 2025-08-26

#### 新功能 (Features)
- 新增 AI 工具筛选阈值：当可用工具数量超过阈值（默认 30）时，自动用大模型预筛选与本次任务最相关的工具，降低干扰、提升执行效率（支持配置项 JARVIS_TOOL_FILTER_THRESHOLD）。
- 角色库新增“综合面试出题者”，覆盖胜任力/动机/签约可能性三大维度，附完整评分标准与输出要求，可直接用于 30 分钟结构化面试。

#### 优化与重构 (Refactors & Improvements)
- 统一模型配置路径：移除 llm_type（normal/thinking）及思考模型通道，全面改为单通道模型配置，降低心智负担与维护成本。
- CLI 全面简化：移除 --llm-type 相关参数；jarvis、jarvis-code-agent、平台管理与角色子命令同步收敛配置入口。
- 交互体验优化：
  - 流式输出采用缓冲与屏幕高度裁剪，减少闪烁与跳动；支持文本溢出折叠，阅读更稳定。
  - 批量日志合并输出（工具列表、文档列表、SSE/MCP 通知、复制历史等），减少重复框线与信息稀疏。
- RAG 能力增强：
  - 嵌入模型优先本地加载，失败再远程下载，提升稳定性与速度。
  - 检索与索引一致性检测提示更友好，支持变更/删除摘要与操作建议。
- 平台与工具稳定性：
  - 文件上传过程日志合并输出，错误与警告聚合展示，问题定位更直观。
  - 多处错误/警告信息汇总打印，避免循环逐条刷屏。
- BasePlatform 渲染优化：降低 Live 刷新频率、缓冲更新、末尾统一收敛输出，显著提升观感。

#### 文档更新 (Documentation)
- 移除 JARVIS_THINKING_PLATFORM / JARVIS_THINKING_MODEL 相关说明与示例。
- 新增 JARVIS_TOOL_FILTER_THRESHOLD 配置项说明与使用建议。
- 多智能体与角色示例去除 llm_type 字段；README/使用指南/配置项表全面同步。
- 统一中文引号风格，修正少量表述细节。

#### 其他 (Miscellaneous)
- 移除 pyproject.toml 中 uv 镜像源配置，简化项目元数据。
- 测试用例同步适配 llm_type 移除后的调用方式。
- ReleaseNote 历史条目与示例清理杂项空行与小格式问题。

本次更新主要聚焦于“简化配置、提升可用性与交互体验”。通过统一模型通道与新增工具筛选阈值，显著降低使用复杂度；同时在流式输出、日志与RAG链路上做了多处细节优化，让信息更聚焦、过程更顺滑。

### Release Note - v0.3.22 2025-08-23

#### 新功能 (Features)
- RAG 检索前索引一致性检测与可选更新：在执行查询前自动检测源文档的变更/删除，支持交互式确认后进行增量更新，并在完成后重建 BM25 索引，确保检索结果新鲜可靠。
- 检索器能力增强：新增 detect_index_changes 与 update_index_for_changes 两个公共方法，支持按 metadata.source 精准删除/重建变更文档，自动维护索引清单（manifest）。
- 工具调用鲁棒性提升：当检测到工具调用缺少结束标签时，支持自动补全并附加友好提示，减少因格式瑕疵导致的中断。

#### 修复 (Fixes)
- 向后兼容：导出 get_yes_no = user_confirm，保证外部模块对旧接口的引用可继续工作。

#### 优化与重构 (Refactors & Improvements)
- CodeAgent 工具集成优化：新增 edit_file 工具；移除旧的 EditFileHandler 输出处理链，统一由工具注册表接管，调用路径更清晰。
- 文件编辑工具逻辑精简：基于 EditFileHandler._fast_edit 的结果进行统一处理与反馈，减少文件回滚与写入分支，提升稳定性与可维护性。
- RAG 流程优化：在 answer 与 retrieve_documents 两条路径均增加“检索前索引检查”，确保入口一致。
- BM25 索引重建流程更稳健：在增量更新后自动重建索引、同步清理已删除文档的清单记录。

#### 文档更新 (Documentation)
- 使用规范更新：明确“对于部分文件内容修改，使用 edit_file 工具”，替代过时的 PATCH 表述，降低理解成本。

#### 其他 (Miscellaneous)
- 工具注册表（ToolRegistry）内部实现细节调整：提取 auto_completed 标记，结果中追加说明，便于问题定位与后续优化。
- 交互与日志输出更友好：对索引变更提供摘要展示与风险提示，提升可感知性。

本次更新主要聚焦于“检索准确性与工程鲁棒性”。通过在检索前主动检测并可选更新索引，结合增量更新与 BM25 重建，显著降低“文档已变更但索引未更新”的风险。同时统一文件编辑与工具调用规范，减少边界问题，整体可维护性与开发体验进一步提升。

### Release Note - v0.3.21 2025-08-22

#### 新功能 (Features)
- 交互式配置向导：新增 jvs -I/--interactive-config，可在启动前基于现有配置逐项确认并保存
- 子任务工具：新增 sub_agent 与 sub_code_agent，支持将子任务托管给子 Agent/CodeAgent，自动完成并生成总结
- 上下文补全增强：支持 # 触发“全量文件模式”（排除 .git）；@ 为“Git 文件模式”；安装 fzf 时提供文件选择器
- 错误回溯可控：新增配置 JARVIS_PRINT_ERROR_TRACEBACK，支持全局或单次开启错误回溯打印
- RAG 增强：检索器引入索引清单与源文件变更/删除检测，提示重新索引，确保知识库一致性

#### 修复 (Fixes)
- read_webpage 工具异常处理与返回结构修复，提升抓取失败时的可观测性
- 多处边界与稳定性修复：平台文件上传、会话保存/恢复、工具执行提示等环节更稳健

#### 优化与重构 (Refactors & Improvements)
- 输出体验统一：PrettyOutput 文案与状态更一致；工具执行前后增加状态提示
- 配置目录支持 ~ 与环境变量展开（工具/方法论/Agent/多Agent/角色目录）
- 默认包索引调整：uv 默认源改为 pypi.org，新增 tencent 镜像（与 aliyun 共存）
- CodeAgent 默认工具集加入 sub_code_agent；Windows 下 .gitattributes 提示与处理更友好
- 智能 Shell（jss）安装/卸载提示优化，兼容 fish/bash/zsh
- RAG 管线日志更清晰；BM25 索引的初始化与保存流程优化
- 交互式输入增强：新增在终端内快捷打开独立 Shell，并避免在 Jarvis 打开的终端中再次启动造成嵌套

#### 文档更新 (Documentation)
- README 增加错误回溯配置说明与使用示例
- 使用指南补充 @/# 两种文件模式、内置指令与交互式配置引导
- 配置项文档新增 JARVIS_PRINT_ERROR_TRACEBACK；补充 --share-tool 与 -I 的用法示例

#### 其他 (Miscellaneous)
- 广泛的代码风格与结构细化，去除多余空行与不一致用法
- 统计与工具注册细节调整，提示信息更聚焦

本次更新主要围绕“可配置性、可观测性与易用性”展开：引入交互式配置、可控错误回溯、上下文补全/选择器全面升级，并完善子Agent工作流与 RAG 一致性检测，整体体验更顺滑可靠。

### Release Note - v0.3.20 2025-08-21

#### **新功能 (Features)**
- 增强多行输入体验：新增支持fzf文件选择器（通过@符号触发）
- 新增终端集成：支持Ctrl+T快捷键启动shell终端
- 新增交互确认机制：支持自定义用户确认回调函数，便于TUI/GUI集成
- 新增免确认执行模式：支持在shell命令中添加# JARVIS-NOCONFIRM标记跳过确认

#### **修复 (Fixes)**
- 修复Windows平台配置编辑器调用问题
- 移除AI8平台不必要的模型验证警告
- 修复剪贴板输出格式的兼容性问题

#### **优化与重构 (Refactors & Improvements)**
- 重构输出系统架构：引入OutputEvent和OutputSink抽象，支持多后端输出
- 优化控制台输出：统一使用PrettyOutput替代直接print
- 增强用户体验：改进多行输入的提示信息和键位绑定
- 优化终端显示：支持宽字符计算和自动换行处理

#### **文档更新 (Documentation)**
- 更新多行输入的使用说明和快捷键提示
- 新增fzf集成的使用文档

#### **其他 (Miscellaneous)**
- 代码风格统一：统一使用PrettyOutput进行格式化输出
- 性能优化：减少不必要的控制台输出

本次更新主要增强了用户交互体验，新增了fzf文件选择器和终端集成功能，同时重构了输出系统架构以支持更灵活的扩展。

### Release Note - v0.3.19 2025-08-20

#### **新功能 (Features)**
- 智能 Shell（JSS）扩展：在原有 fish 的基础上，新增 bash 与 zsh 的“命令未找到”智能建议与可编辑执行支持；交互模式可直接编辑建议并回车执行，非交互模式自动输出建议。
- 角色体系模块化：将原先的 builtin/roles/roles.yaml 拆分为多模块文件，新增/完善以下角色包：
  - coaching_roles.yaml、hr_roles.yaml、planning_roles.yaml、thinking_roles.yaml、writing_roles.yaml
  - 内容覆盖“公司技术教练认证首席导师”“GROW 模型分析专家”“活动策划专家”等丰富角色。
- 统计能力增强：引入 totals 总量缓存与快速总量查询；自动解析并写回指标分组；StatsManager 新增 get_metric_total / get_metric_info / resolve_metric_group 等 API。

#### **修复 (Fixes)**
- 输入兼容性修复：新增 Agent._multiline_input 包装，兼容仅接受单参数的自定义多行输入器（TypeError 兜底），避免交互中断。
- 提交流程稳健性：Git 提交在 Windows 下的临时文件读写与清理更加可靠；大 diff 上传/处理路径更加稳健，失败信息更清晰。

#### **优化与重构 (Refactors & Improvements)**
- 输出体验统一：广泛替换零散 print 为 PrettyOutput，统一信息分级与展示；模型流式输出增加“按 Ctrl+C 中断”提示，并在非“花屏”模式下清晰回显与耗时统计。
- 多行输入体验升级：底部工具栏展示快捷键（@ 文件补全、Tab 选择、Ctrl+J 确认、Ctrl+O 历史复制、Ctrl+C/D 取消），提示信息更友好。
- RAG 与 CLI 体验：检索/重排/统计/工具列表/调用等输出统一风格，错误与代码块高亮，过程提示更清晰；RAG 日志与提示更易读。
- 统计看板性能：使用快速总量读取，避免全量扫描；使用分组信息提升看板展示准确性；表格与布局对齐优化。
- Git/提交与跨平台：更安全的临时文件处理，异常分支更完善；换行符建议与提示更贴合实际。
- 终端工具一致性：VirtualTTY、文件读写、网页读取、搜索等工具的日志与错误输出统一为 PrettyOutput，减少噪声日志。

#### **文档更新 (Documentation)**
- 角色定义内容结构化与拆分，角色说明更清晰、可维护（coaching/hr/planning/thinking/writing 五大模块）。

#### **其他 (Miscellaneous)**
- 多处细节健壮性提升、异常处理完善、提示文案统一与国际化倾向。

本次更新主要聚焦于：智能 Shell 覆盖更多主流终端（bash/zsh）、角色体系模块化重构、控制台交互与日志输出的统一优化、统计系统的性能与分组增强，以及输入体验的全面提升。

### Release Note - v0.3.18 2025-08-19

#### **新功能 (Features)**  
- 新增 `JARVIS_IMMEDIATE_ABORT` 环境变量配置，支持在对话输出过程中检测到用户中断信号（如 Ctrl+C）时立即返回当前已生成内容并停止继续输出
- 增强网页内容读取功能，支持使用配置的 web_search_platform 与模型的原生 web 能力，并在不支持时自动回退到 requests 抓取页面分析
- 优化角色选择器界面，新增角色数量显示功能，在选择角色时直观展示每个角色配置包含的角色数量

#### **修复 (Fixes)**  
- 修复用户中断处理逻辑，在中断后正确设置 `run_input_handlers_next_turn` 标志，确保下一次运行能正确处理用户输入
- 修复工具分享和资源分享管理器中的异常处理，将 `typer.Exit` 异常替换为 `return` 语句，避免不必要的程序退出
- 修复角色选择器中的空输入处理，支持直接回车退出程序，提升用户体验

#### **优化与重构 (Refactors & Improvements)**  
- 优化网页内容读取工具的可用性检查逻辑，确保工具始终可用，即使模型不支持 web 功能也能通过回退方案正常工作
- 优化命令行界面输出格式，简化多个命令的输出信息，使输出更加简洁清晰
- 增强配置管理功能，新增 `is_immediate_abort()` 配置读取函数，支持从配置文件中读取立即中断设置

#### **文档更新 (Documentation)**  
- 更新项目文档，新增 `JARVIS_IMMEDIATE_ABORT` 环境变量的详细说明和使用指南
- 更新配置 schema 文档，添加新配置项的 JSON Schema 定义和描述

#### **其他 (Miscellaneous)**  
- 更新了微信二维码图片文件

本次更新主要增强了用户体验和系统稳定性，新增的中断处理功能让用户能够更灵活地控制对话流程，同时优化了网页内容读取和角色选择等核心功能的可用性。

### Release Note - v0.3.17 2025-08-17

#### 新功能 (Features)
- 启动前可选交互：在检测到当前目录为 Git 仓库时，可提示并一键切换至代码开发模式（jca），提高代码任务体验（配置项：JARVIS_ENABLE_GIT_JCA_SWITCH）。
- 启动前内置配置选择器：进入默认通用代理前可列出可用的 agent/multi_agent/roles 配置，直接选择并启动（配置项：JARVIS_ENABLE_STARTUP_CONFIG_SELECTOR）。
- 可扩展的配置加载目录：新增 JARVIS_AGENT_DEFINITION_DIRS、JARVIS_MULTI_AGENT_DIRS、JARVIS_ROLES_DIRS，用于扫描自定义配置目录，支持多目录并去重。
- 首次运行配置向导：引导设置 Pretty Output、打印 Prompt、静态分析、方法论系统、分析流程、强制保存记忆及中心仓库地址等关键开关，自动写回 ~/.jarvis/config.yaml，默认值可交互选择。
- 多行输入体验升级：首次按 Enter 时以一次性提示引导用户使用 Ctrl+J 确认提交，多行编辑更友好、可持续记忆提示状态。

#### 修复 (Fixes)
- 向后兼容增强：SessionManager 新增 clear() 别名方法，兼容历史调用与既有测试场景。

#### 优化与重构 (Refactors & Improvements)
- jarvis-agent 启动流程重构：预加载配置不干扰后续 init_env，异常更健壮；基于配置的目录扫描与每日 Git 更新检查；角色清单展示更详细。
- 预定义任务交互升级：TaskManager 使用 rich 表格展示任务列表，配合清晰的“[0] 跳过”指引，选择体验更直观。
- 安装流程简化：install.sh 取消自动运行 jarvis 初始化，优化步骤编号与输出文案，更贴合非交互式安装。
- 输入组件文案统一：多行输入帮助提示更精炼，关键操作（Ctrl+J 确认）更明显。
- 类型与静态检查增强：补充类型标注与兼容注释，提升静态分析与CI稳定性。

#### 文档更新 (Documentation)
- 安装与使用手册新增“可选的启动行为设置”“启动前的可选交互”等章节，详解两项新开关的使用方式与配置示例。
- 配置文档补充 JARVIS_ENABLE_GIT_JCA_SWITCH、JARVIS_ENABLE_STARTUP_CONFIG_SELECTOR 及多配置目录项的说明与默认值。
- Schema 文档同步更新，确保编辑器联动校验与智能提示。

#### 其他 (Miscellaneous)
- CI 工作流完善：新增安装脚本验证 Job，确保 scripts/install.sh 在 CI 环境可顺利运行并验证可执行文件生成。
- 统一与清理：YAML 风格与字段对齐调整，细节一致性更好。
- 测试覆盖提升：新增 jarvis CLI、ShareManager、TaskManager 的单元测试用例，增强回归保障。

本次更新主要面向“启动体验与可配置性提升、交互友好度增强、安装流程与稳定性优化”，同时完善了文档与测试以保障整体质量。

### Release Note - v0.3.16 2025-08-16

#### **新功能 (Features)**  
- 新增Git仓库自动检测与代码开发模式切换功能，启动时智能识别Git项目并提示切换到jca模式
- 增强CLI交互体验，提供内置配置选择界面，支持agent、multi_agent、roles等多种配置类型
- 新增工具协议版本支持（v1.0/v2.0），实现agent与参数的分离传递机制
- 为多智能体系统添加详细描述信息，提升配置可读性

#### **修复 (Fixes)**  
- 修复YAML解析错误处理的可观测性问题，提升错误定位能力
- 修复工具注册时的参数注入问题，避免agent参数污染工具参数
- 修复命令行参数解析错误，统一短选项格式（-T/-t区分）
- 修复多智能体系统启动时的异常处理问题，增强健壮性

#### **优化与重构 (Refactors & Improvements)**  
- 重构工具执行逻辑，支持向后兼容的工具协议版本机制
- 优化内部配置管理，将example目录重命名为builtin，提升项目结构清晰度
- 改进CLI启动流程，增加用户友好的配置选择界面
- 增强代码风格一致性，统一YAML文件格式规范

#### **文档更新 (Documentation)**  
- 更新所有智能体配置文件，添加详细描述和使用说明
- 完善多智能体系统文档，补充交互流程和输出格式说明
- 新增开发者角色配置，支持thinking模式的高端智能体

#### **其他 (Miscellaneous)**  
- 清理TODO.md文件，整理项目开发计划和里程碑
- 更新依赖管理和类型注解，提升代码质量

本次更新主要聚焦于提升用户体验和系统健壮性，通过智能检测和交互优化，让Jarvis更加易用和可靠。新增的工具协议版本机制为未来扩展奠定了坚实基础。

### Release Note - v0.3.15 2025-08-16

#### **新功能 (Features)**  
- 为提交信息添加前缀和后缀参数支持
- 修正script_cotent拼写错误为script_content

#### **修复 (Fixes)**  
- 修复流式客户端的URL拼接、超时及响应处理问题
- 修复阻塞调用与日志目录配置问题
- 为_git相关方法添加prefix和suffix参数

#### **文档更新 (Documentation)**  
- 更新 _extract_tool_calls 方法的返回类型注释
- 添加TODO文档记录项目待办事项
- 移除已完成的拼写修复任务

本次更新主要改进了代码提交的灵活性，修复了多个API和客户端问题，并完善了项目文档。

### Release Note - v0.3.14 2025-08-15

#### **新功能 (Features)**
- 增强代码代理功能，支持空仓库场景下的git提交处理
- 优化用户交互体验，支持自定义回复作为附加提示

#### **修复 (Fixes)**
- 修复Agent析构函数中的异常处理问题，避免程序崩溃
- 修复空仓库或无HEAD场景下的提交计数问题

#### **优化与重构 (Refactors & Improvements)**
- 改进show_agent_startup_stats函数，支持传入工具注册表实例避免重复初始化
- 优化Agent类初始化参数，使用Optional类型替代默认值列表，避免可变默认参数问题
- 增强代码健壮性，添加异常处理和兼容性检查
- 优化代码代理的git操作逻辑，兼容更多边缘场景

#### **其他 (Miscellaneous)**
- 移除未使用的ct标签导入
- 重置模型后重新设置系统提示词，确保系统约束持续生效

本次更新主要提升了代码代理的稳定性和用户体验，增强了空仓库场景的处理能力，并修复了多个潜在的异常问题。


### Release Note - v0.3.13 2025-08-13

#### **新功能 (Features)**  
- 新增 `run_input_handlers_next_turn` 标志位，用于更精确控制下一轮输入处理器的行为
- 优化了平台不存在时的提示信息格式，提升用户体验

#### **修复 (Fixes)**  
- 修复了 `Agent.clear()` 方法命名冲突问题，统一为 `clear_history()` 避免歧义
- 修复了会话提示词拼接逻辑，避免空值导致的格式问题

#### **优化与重构 (Refactors & Improvements)**  
- 重构了工具调用后的提示词处理逻辑，使其更清晰和健壮
- 改进了多行输入提示的格式，增强可读性
- 移除了冗余的 `clear()` 和 `clear_history()` 重复定义，简化代码结构

#### **其他 (Miscellaneous)**  
- 清理了未使用的导入和冗余方法定义

本次更新主要聚焦于代码质量提升和用户体验优化，通过统一命名规范和改进提示信息格式，使系统更加稳定和易用。

### Release Note - v0.3.12 2025-08-12

#### **优化与重构 (Refactors & Improvements)**  
- 优化Agent类输入处理逻辑，简化_run方法中的输入处理流程  
- 重构历史处理机制，改进摘要生成和清理逻辑  
- 优化命令行参数格式，简化typer选项定义格式  
- 改进文件方法论管理器，移除冗余的记忆标签提示  
- 优化分享管理器代码结构，修复类型注解兼容性问题  

#### **修复 (Fixes)**  
- 修复Summary标签处理逻辑，确保会话重置时正确设置初始提示  
- 修复历史清理时的模型重置问题，避免会话状态残留  
- 修复.gitignore处理中的格式问题，确保提交信息格式统一  

#### **其他 (Miscellaneous)**  
- 更新输入处理器的调用方式，提升代码可读性  
- 标准化代码格式，统一字符串引号使用风格  

本次更新主要聚焦于代码质量提升和用户体验优化，通过重构核心逻辑简化了Agent的工作流程，同时修复了会话管理中的一些边界情况处理问题。

### Release Note - v0.3.11 2025-08-11

#### **新功能 (Features)**  
- 支持独立配置Web搜索使用的平台和模型，通过`JARVIS_WEB_SEARCH_PLATFORM`和`JARVIS_WEB_SEARCH_MODEL`环境变量进行设置
- 新增Web搜索配置优先级逻辑，当配置了专门的搜索平台和模型时，优先使用配置项而非默认模型选择流程

#### **优化与重构 (Refactors & Improvements)**  
- 优化Web搜索工具的实现逻辑，增强平台选择和模型配置的灵活性
- 改进配置系统，新增Web搜索相关配置项到配置schema中

#### **文档更新 (Documentation)**  
- 更新配置文档，新增Web搜索相关环境变量的说明和配置示例

本次更新主要增强了Web搜索功能的配置灵活性，允许用户为搜索操作单独配置平台和模型，提升了系统的可定制性。
### Release Note - v0.3.8 2025-08-10

#### **优化与重构 (Refactors & Improvements)**  
- 将代码RAG配置的embedding模型从"Qodo/Qodo-Embed-1-7B"优化为"Qodo/Qodo-Embed-1-1.5B"，显著减少内存占用和计算开销
- 统一更新文档和配置文件中所有相关的模型引用，确保配置一致性

#### **文档更新 (Documentation)**  
- 更新《使用指南》中RAG配置组的示例，采用更轻量级的1.5B模型
- 修订《高级主题》文档中的配置说明，提供更高效的模型选择建议
- 更新《附录》中的环境变量说明，反映最新的默认配置变化

本次更新主要优化了RAG系统的模型配置，通过采用更轻量级的embedding模型，在保证检索质量的同时显著提升了系统性能和资源利用效率。建议用户重新加载配置以应用最新优化。

### Release Note - v0.3.7 2025-08-09

#### **新功能 (Features)**
- 新增记忆整理机制与实现原理详细文档，包含智能合并算法和使用示例
- 增强Jarvis更新检测功能，支持pip/uv安装的版本更新检查
- 新增RAG特性检测，在安装时自动根据环境选择是否启用RAG功能

#### **修复 (Fixes)**
- 修复git更新检查逻辑，现在会优先检查git源码安装，再检查pip安装
- 修复版本更新提示信息，提供更准确的更新命令

#### **优化与重构 (Refactors & Improvements)**
- 重构更新检测机制，将原来的`_check_git_updates`重命名为`_check_jarvis_updates`，支持多种安装方式的更新检查
- 优化安装命令选择逻辑，根据RAG特性是否安装来选择正确的安装包
- 改进更新提示信息，区分虚拟环境和不同包管理器(uv/pip)

#### **文档更新 (Documentation)**
- 新增记忆整理工具(jarvis-memory-organizer)的完整使用指南
- 补充高级主题章节，详细介绍记忆系统的架构设计和实现原理
- 添加记忆整理的性能优化策略和最佳实践

#### **其他 (Miscellaneous)**
- 新增日期处理支持，用于记录更新检查时间
- 增强错误处理，静默处理网络请求失败情况

本次更新主要增强了Jarvis的自更新能力和记忆管理功能。新增了记忆整理工具，可以自动合并重复或相似的记忆内容，提升存储效率和检索质量。同时改进了更新检测机制，现在支持检查pip/uv安装的版本更新，让用户能够及时获取最新功能。


### 发布说明 - v0.3.6 2025-08-08

#### **新功能**  
- 新增Shell环境自动配置功能，支持bash/zsh/fish
- 将PowerShell安装脚本改为英文版，解决Windows编码问题

#### **问题修复**  
- 移除了pyproject.toml中的网易镜像源配置

#### **优化改进**  
- 重构PowerShell安装脚本，优化虚拟环境激活流程
- 改进memory_organizer.py中的记忆合并提示格式

#### **文档更新**  
- 更新安装脚本中的帮助信息和提示文本

#### **其他**  
- 优化安装过程中的用户交互体验

本次更新主要解决了Windows下的编码问题，并优化了安装体验。

### Release Note - v0.3.5 2025-08-08

#### **新功能 (Features)**  
- 新增网易镜像源(netease)到uv配置中，提供更多pypi镜像选择

#### **修复 (Fixes)**  
- 修复记忆合并过程中索引越界问题，改进记忆合并算法
- 修复删除不存在的记忆文件时的错误处理
- 修复typer.Exit异常处理逻辑

#### **优化与重构 (Refactors & Improvements)**  
- 重构uv配置结构，使用index-strategy替代旧的配置方式
- 优化记忆合并性能，使用标记删除代替直接删除
- 简化平台对话统计信息显示，移除token计算相关指标

#### **文档更新 (Documentation)**  
- 无

#### **其他 (Miscellaneous)**  
- 改进记忆合并过程中的日志输出信息

本次更新主要优化了记忆合并的稳定性和性能，同时简化了部分UI显示，并增加了新的pypi镜像源。


### Release Note - v0.3.4 2025-08-07

#### **新功能 (Features)**
- **自动化环境配置**: 大幅增强安装脚本 (`install.sh`, `install.ps1`)，可自动检测并安装 `uv` 环境，同时配置国内镜像，实现开箱即用的顺滑体验。
- **智能记忆库维护**: 新增记忆库自动检查与整理功能。当记忆条目过多且存在内容重叠时，系统会主动提示用户进行优化，确保长期使用的性能和相关性。
- **增强的启动概览**: Agent 启动时会展示一个全新的资源概览面板，清晰地列出已加载的方法论、工具、全局记忆和项目记忆的数量，核心能力一目了然。

#### **修复 (Fixes)**
- **工具执行健壮性**: 全面增强了工具执行的异常捕获机制，在工具本身或其执行过程中发生错误时，能优雅地处理异常并返回错误信息，防止整个流程意外中断。

#### **优化与重构 (Refactors & Improvements)**
- **全新CLI主界面**: 彻底重构了启动时的欢迎界面！打造了全新的多面板现代化布局，集成了项目 Logo、版本号、愿景、使命以及详细的使用统计，视觉效果和信息密度全面提升。
- **Agent启动流程优化**: 重构了 Agent 的启动逻辑，将统计信息展示、环境检查等功能模块化，使启动过程更清晰、信息更丰富。
- **依赖安装智能化**: 在项目自动更新时，系统能智能识别当前是否处于 `uv` 管理的虚拟环境，并自动选择 `uv pip` 或原生 `pip` 执行安装，提升了兼容性。

#### **文档更新 (Documentation)**
- **明确使命与愿景**: 在全新的主界面中，首次明确阐述了 Jarvis 项目的使命（Mission）与愿景（Vision），更好地向用户传递项目的核心价值与追求。

**本次更新总结**:
本次更新是 v0.3.x 系列的一次重大飞跃，核心是 **“智能化”** 与 **“用户体验”** 的双重提升。我们引入了针对模型的智能方法论加载、自动化的记忆库维护和更鲁棒的安装脚本。同时，全新的CLI主界面不仅带来了惊艳的视觉效果，也更好地传递了Jarvis的价值主张。这些改进共同打造了一个更智能、更稳定、更易于使用的开发者AI助手。


### Release Note - v0.3.3 2025-08-07

#### **新功能 (Features)**
- **新增记忆整理工具 (`jmo`)**: 引入了全新的 `jarvis-memory-organizer` (`jmo`) 工具，可以智能识别和合并具有相似标签的记忆。它支持自动合并、导入导出、模拟运行等功能，帮助您保持记忆库的整洁和高效，让 Jarvis 越用越聪明！

#### **优化与重构 (Refactors & Improvements)**
- **安装脚本增强**: `install.sh` 和 `install.ps1` 脚本现在会自动检测未提交的本地更改，并提示用户确认是否覆盖，防止意外丢失工作。
- **配置交互优化**: 在进行交互式配置时，系统会提供详细的指引，告诉用户如何获取相关平台的 API Key 或 Cookies。
- **工具健壮性提升**: 多个核心工具（如 `jgc`, `jcr`）增加了通过命令行参数 (`-g/--llm_group`) 临时切换模型配置组的功能，方便针对不同任务调用最合适的模型。
- **核心Agent交互改进**:
    - `jca`（代码Agent）在生成 Commit Message 后会根据配置主动提示用户保存本次交互的记忆。
    - `jpm`（平台管理器）的聊天命令（如 `/upload`, `/save`）支持更灵活的参数格式。
    - 短期记忆在检索时会按时间倒序排列，优先返回最新的记忆。

#### **文档更新 (Documentation)**
- **README 更新**: 全面更新了 README 文件，包含了所有新工具的介绍、快捷方式以及推荐的 `uv` 安装方法。
- **新增 `jmo` 使用指南**: 在文档中添加了记忆整理工具的详细使用说明。
- **新增 LLM 配置组最佳实践**: 添加了如何通过配置组灵活切换不同模型的最佳实践文档。
- **FAQ 更新**: 重构并更新了常见问题（FAQ）页面，解决了快捷键冲突等新问题。


### Release Note - v0.3.2 2025-08-05

#### **新功能 (Features)**
- 新增GitHub Actions CI/CD测试工作流，支持自动化测试
- 在角色系统中新增"专业面试出题者"和"简历编写专家"两种专业角色
- 新增uv包管理器安装指南，提供现代化Python项目管理方案
- 增强平台管理器功能，支持通过命令行参数覆盖默认配置

#### **修复 (Fixes)**
- 修复命令行参数命名冲突问题，统一参数命名规范
- 修复测试脚本路径错误，确保测试可在项目根目录正确执行
- 修复.gitignore文件格式问题，优化Python字节码文件忽略规则
- 修复中心仓库.gitignore文件缺失问题，自动添加Python缓存忽略

#### **优化与重构 (Refactors & Improvements)**
- 优化CLI命令参数设计，使用更直观的短参数形式
- 重构平台管理器参数处理逻辑，支持模型组和LLM类型覆盖
- 改进统计存储的原子性操作，使用UUID避免并发冲突
- 优化文档格式和可读性，增强方法论描述的清晰度

#### **文档更新 (Documentation)**
- 更新快速开始指南，增加uv安装方式说明
- 完善使用指南中的命令行参数说明
- 增强教练认证方法论文档，新增多种分析工具和模型
- 优化技术教练角色的系统提示和交互流程

#### **其他 (Miscellaneous)**
- 新增测试环境配置，支持持续集成
- 改进项目管理兼容性，支持现代Python开发工具链

本次更新主要提升了项目的工程化水平和用户体验，新增了实用的专业角色，优化了CLI交互设计，并建立了完整的CI/CD流程。

### Release Note - v0.3.1 2025-08-04

#### **新功能 (Features)**  
- 新增交互式配置向导，简化首次运行设置流程
- 添加`JARVIS_FORCE_SAVE_MEMORY`配置项，控制记忆保存提示行为
- 实现PDF生成脚本自动命名功能

#### **修复 (Fixes)**  
- 修复平台管理器服务启动时的模型解析逻辑
- 修正记忆提示信息的格式和内容
- 解决搜索工具的结果分页问题

#### **优化与重构 (Refactors & Improvements)**  
- 重构记忆管理系统提示模板
- 优化配置架构设计文档
- 改进技术文档组织结构，合并分散内容

#### **文档更新 (Documentation)**  
- 新增完整的Jarvis使用手册（9章节）
- 更新配置系统技术文档
- 添加开发环境设置指南

#### **其他 (Miscellaneous)**  
- 移除过时的技术文档文件
- 更新微信二维码图片
- 清理无用配置项

本次更新主要优化了用户体验和文档体系。

### Release Note - v0.3.0 2025-08-03

#### **新功能 (Features)**
- **工具组 (Tool Groups)**: 新增工具组功能，允许用户根据不同任务场景（如编码、文档、系统管理）定义和切换不同的工具集，可通过 `--tool_group` 参数或配置文件 (`JARVIS_TOOL_GROUPS`) 进行设置，极大地提升了安全性、易用性和任务专注度。
- **中心方法论与工具库**:
  - **中心方法论库**: 支持通过 Git 仓库 (`JARVIS_CENTRAL_METHODOLOGY_REPO`) 共享团队的最佳实践和问题解决方案，并可通过 `--share-methodology` 命令轻松分享本地方法论。
  - **中心工具库**: 允许团队共享和同步自定义工具 (`JARVIS_CENTRAL_TOOL_REPO`)，通过 `--share-tool` 命令即可将本地工具分享至中心库，促进团队内部工具生态的建设。
- **交互式配置引导**: 为新用户提供了全新的交互式配置向导。首次启动时，Jarvis会引导用户选择AI平台、配置密钥、选择模型并进行连接测试，极大降低了初始配置门槛。
- **全面的单元测试套件**: 新增了基于 `pytest` 的完整测试套件 (`run_tests.sh`)，覆盖核心模块，为项目的稳定性和代码质量提供了坚实保障。
- **智能上下文管理**:
  - **记忆检索优化**: `retrieve_memory` 工具现在能根据Token数量限制检索结果，避免因记忆内容过多导致上下文溢出。
  - **方法论加载优化**: 加载方法论时同样会进行Token限制，确保核心方法论内容能在模型上下文中有效利用。

#### **优化与重构 (Refactors & Improvements)**
- **Agent架构大规模重构**: 对核心 `Agent` 模块进行了彻底的重构，将功能拆分为 `AgentManager`, `MemoryManager`, `TaskAnalyzer`, `FileMethodologyManager` 等多个独立的管理器，代码结构更清晰，可维护性和扩展性显著增强。
- **CLI入口重构**: 主程序入口 `jarvis.py` 代码被重构，逻辑更清晰，将分享、配置等功能模块化管理。
- **平台配置标准化**: 各AI平台（OpenAI, Kimi, etc.）实现标准化接口，用于声明所需的环境变量和默认值，为交互式配置提供了支持。
- **依赖安装源优化**: 在 `pyproject.toml` 中增加了清华大学PyPI镜像源，方便国内用户加速依赖安装。

#### **文档更新 (Documentation)**
- **使用手册全面更新**: 大幅更新了使用手册，详细介绍了工具组、中心库、新的CLI参数等所有新功能的使用方法和最佳实践。


### Release Note - v0.2.7 2025-08-01

#### **新功能 (Features)**
- **批量记忆保存**: `save_memory`工具现支持一次保存多条不同类型的记忆，提升记忆管理效率
- **记忆清除功能**: 新增`clear_memory`工具，支持按类型、标签或ID批量清除记忆，提供灵活的记忆管理能力
- **方法论分享**: 新增`--share-methodology`命令行选项，可将本地方法论分享到中心方法论仓库
- **中心方法论仓库**: 支持配置`JARVIS_CENTRAL_METHODOLOGY_REPO`，自动同步和加载共享方法论

#### **修复 (Fixes)**
- 修复多行输入时自动补全可能导致的异常问题
- 修复部分类型注解错误，提升代码健壮性

#### **优化与重构 (Refactors & Improvements)**
- **代码工程师增强**: `code_agent`现已集成完整的记忆管理功能（save、retrieve、clear）
- **记忆提示优化**: 任务开始前自动提醒用户记录关键信息，改善记忆使用体验
- **UI优化**: INFO类型输出颜色从gold1调整为bright_cyan，提升可读性
- **批量选择支持**: 方法论分享支持范围选择（如1-5,7,9-12），提升操作效率

#### **文档更新 (Documentation)**
- 更新技术文档，完整介绍三个记忆管理工具的使用方法
- 添加批量保存和清除记忆的使用示例
- 更新使用指南，添加方法论分享功能说明

#### **其他 (Miscellaneous)**
- 改进方法论加载逻辑，避免重复警告
- 优化Git操作的错误处理和用户提示

本次更新主要增强了Jarvis的记忆管理能力，新增的批量操作和清除功能让记忆管理更加灵活高效。同时，方法论分享功能促进了社区协作，让优秀的问题解决方案可以被更多人使用。

### Release Note - v0.2.6 2025-07-31

#### **新功能 (Features)**  
- **长短期记忆系统**：引入了革命性的三层记忆架构
  - 短期记忆：存储当前任务相关的临时信息（内存中，非持久化）
  - 项目长期记忆：保存项目特定信息（存储在`.jarvis/memory/`）
  - 全局长期记忆：跨项目的通用知识和偏好（存储在`~/.jarvis/data/memory/`）
- **记忆工具集成**：新增`save_memory`、`retrieve_memory`和`clear_memory`工具
  - 支持标签化存储和检索
  - 智能记忆类型选择
  - 最多返回200个标签，超过时随机提取
  - **批量保存功能**：`save_memory`现支持一次保存多条不同类型的记忆
  - **记忆清除功能**：新增`clear_memory`工具，支持按类型、标签或ID批量清除记忆
- **自动记忆提示**：Agent检测到记忆工具时自动添加使用提示
  - 任务开始前提醒用户记录关键信息
  - 系统提示中包含记忆操作指引
- **代码工程师记忆集成**：`code_agent`现已集成完整的记忆管理功能
- **用户满意度反馈机制**：任务完成后收集用户反馈，用于持续改进

#### **修复 (Fixes)**  
- 修复生成配置文件时schema路径错误问题（使用绝对路径）
- 修复`edit_file_handler`文本替换时可能替换多个匹配项的问题（现在只替换第一个匹配）

#### **优化与重构 (Refactors & Improvements)**  
- 优化记忆检索输出格式，限制最多返回50条记忆（随机选取）
- 统一长短命令的使用统计，合并历史数据
- 移除git换行符设置的用户确认步骤，简化操作流程
- 增强代码编辑器的缩进和格式处理能力

#### **文档更新 (Documentation)**  
- 新增记忆系统使用指南（第4.12节）
  - 详细介绍三种记忆类型
  - 提供使用示例和最佳实践
  - 包含高级用法指导
- 更新技术文档，添加记忆系统架构说明（第2.4节）

本次更新的核心是引入了完整的长短期记忆系统，这是Jarvis向真正智能化迈出的重要一步。通过三层记忆架构，Jarvis现在可以：
- 记住项目特定的上下文和约定
- 积累跨项目的知识和经验
- 在任务执行过程中保持临时信息
- 通过标签系统快速检索相关记忆

同时，我们还改进了用户体验，添加了满意度反馈机制，并修复了多个影响稳定性的问题。

### Release Note - v0.2.5 2025-07-30

#### **新功能 (Features)**  
- Windows PowerShell 一键安装脚本支持，大幅简化Windows用户的安装流程
- 统计模块引入 plotext 图表库，提供专业的数据可视化效果
- 统计指标增加删除功能，支持清理不需要的历史数据
- 指标列表显示增加标签信息，便于分类管理和筛选
- 新增命令映射功能，统一短命令和长命令的使用统计
- 剪贴板功能新增跨平台支持（Windows、macOS、Linux）
- 新增 Vibe Working 工作模式文档，介绍更直觉的人机协作理念

#### **修复 (Fixes)**  
- 修复指标摘要显示时的时间范围和标签过滤功能
- 修复 list_metrics 方法未返回所有指标的问题
- 修复用户中断后工具调用的处理逻辑，改进交互体验

#### **优化与重构 (Refactors & Improvements)**  
- 统计模块全面重构：使用 Rich 库美化表格和面板显示
- 简化 token 限制配置，采用动态计算替代多个独立配置项
- 优化方法论加载逻辑，实现两阶段筛选机制提升性能
- 改进节省时间估算模型，提供更准确的效率统计
- 统计图表支持计数类指标使用总和显示，其他指标使用平均值
- 将StatsManager改为静态方法调用，简化使用方式
- 根据输出文件名动态生成PDF标题

#### **文档更新 (Documentation)**  
- README 新增 Windows PowerShell 安装说明
- 新增 Vibe Working 工作模式介绍章节
- 更新配置文档，简化 token 相关配置说明

#### **其他 (Miscellaneous)**  
- 将时间节省统计中的一天调整为8小时工作时
- 统计显示界面采用3行2列布局，信息展示更紧凑
- 移除方法论模块的文件上传功能，简化实现

本次更新重点提升了跨平台支持和用户体验。Windows用户现在可以通过PowerShell一键安装，统计功能的可视化效果得到全面升级，引入plotext和rich库让数据展示更加专业美观。同时，我们引入了"Vibe Working"理念，让AI协作更加自然流畅。


### Release Note - v0.2.4 2025-07-30

#### **新功能 (Features)**
- 添加完整的统计功能模块 `jarvis-stats`，支持灵活的指标记录和可视化展示
- 新增时间节省统计功能，自动计算用户通过使用Jarvis节省的开发时间
- 为 `edit_file` 工具添加统计功能，记录工具使用情况

#### **修复 (Fixes)**
- 修复 Windows 系统下的多个兼容性问题
  - 修复文件锁兼容性问题，使用临时文件+原子重命名替代fcntl
  - 修复编码问题，为所有subprocess调用添加encoding和errors参数
  - 修复 Windows 下 PrettyOutput 配置问题
- 修正命令行参数名称从 `--model_group` 到 `--llm_group`

#### **优化与重构 (Refactors & Improvements)**
- 改进编辑器选择逻辑，根据操作系统自动选择合适的编辑器
- 使用跨平台的Python方法替换系统命令
- 使用 `uv` 重构安装脚本，提供更快速和稳定的安装体验

#### **文档更新 (Documentation)**
- 新增 Jarvis Book 官方文档，提供完整的中文使用指南
- 添加 `jarvis-stats` 工具的详细文档和使用示例
- 更新配置文档，新增 `JARVIS_METHODOLOGY_DIRS` 等配置项说明
- 补充"Vibe Working"核心理念介绍，阐述人机协作新模式

#### **其他 (Miscellaneous)**
- 添加 `.gitattributes` 文件配置跨平台换行符规则
- 优化 Git 配置检查，确保用户正确设置 username 和 email
- 移除未使用的依赖项，减小安装包体积
- 添加 RAG 功能的可选安装，允许用户根据需求选择

本次更新主要聚焦于**数据驱动的效率提升**。通过新增的统计模块，用户可以精确量化AI助手带来的价值，从"感觉很有用"到"节省了28.5小时"的转变。同时，大幅改进了Windows兼容性和中文本地化，让更多开发者能够顺畅使用Jarvis。

### Release Note - v0.2.3 2025-07-29

#### **新功能 (Features)**
- **RAG 增强**: 
  - 新增 `jrg retrieve` 命令，允许用户仅从知识库检索文档，而不生成答案，便于快速查阅资料。
  - 新增 RAG 配置组 (`JARVIS_RAG_GROUPS`) 功能，支持在不同的 RAG 方案（如文本 vs 代码）之间快速切换。
  - 查询重写功能得到增强，现已支持多语言查询，并提升了在复杂问题下的鲁棒性。
  - RAG 流程新增了对 BM25 稀疏检索和重排（Rerank）功能的控制开关，用户可根据需求定制检索策略。
- **功能扩展与文档**:
  - 新增了全面的《功能扩展》文档，详细介绍了如何开发标准工具、集成 MCP 工具以及扩展新的 LLM 平台。
  - 引入了方法论（Methodology）共享机制，允许团队通过 Git 仓库共享和自动更新最佳实践，沉淀知识资产。
- **交互体验提升**:
  - 极大地增强了多行输入功能，新增了强大的消息历史记录功能（快捷键 `Ctrl+O`），可以方便地查看、选择并复制之前的任意输入或输出。
- **工具开发改进**:
  - `generate_new_tool` 工具新增了关键校验，强制要求工具文件名与代码内部的 `name` 属性完全一致，从根源上避免了常见的自定义工具加载失败问题。
- **平台支持**:
  - 通义千问平台新增了对深度研究和深度网页搜索模型的支持。

#### **修复 (Fixes)**
- 修复了在多行输入模式下，从历史记录中复制内容可能导致终端显示混乱的问题。

#### **优化与重构 (Refactors & Improvements)**
- **命名统一**: "模型组" (Model Group) 已在整个项目中被统一重命名为 "LLM组" (LLM Group)，相关的配置项（如 `JARVIS_MODEL_GROUP`）也同步更新为 `JARVIS_LLM_GROUP`，使概念更清晰。
- **RAG 性能**: 重构了 RAG 核心管线（Pipeline），实现了模型和组件的延迟加载（Lazy Loading），显著优化了资源占用和相关命令的启动速度。
- **依赖管理**:
  - 项目的最低 Python 版本要求已提升至 3.9，以利用新版本语言特性。
  - 核心依赖项已更新，确保了更好的稳定性和功能支持。
- **配置管理**: 为 LLM 和 RAG 的组配置模式添加了更合理的默认值，提升了开箱即用的体验。

#### **文档更新 (Documentation)**
- **README.md 重构**: 对项目首页 `README.md` 进行了大幅更新，新增了项目定位、核心优势、工作流对比等内容，使其更具吸引力和指导性。
- **Jarvis Book**: 全面更新了 Jarvis Book（本地文档），内容与最新的功能和重构保持一致，包括 RAG 组、LLM 组、功能扩展等章节。
- **新增免责声明**: 在 `README.md` 中添加了关于模型使用和命令执行风险的免责声明，提升了安全性透明度。

本次更新聚焦于 **RAG 能力的深化**和**框架扩展性的增强**，同时通过对**交互体验的极致优化**（特别是消息历史功能），让 Jarvis 作为个人开发助手的角色更加得心应手。文档的全面重构也让新老用户都能更容易地挖掘 Jarvis 的强大潜力。

### Release Note - v0.2.2 2025-07-27
#### **新功能 (Features)**
-   **全新文档系统**: 新增 "Jarvis Book" 官方文档系统，提供从入门到精通的全方位指南。
-   **CLI界面升级**: 命令行界面全面从 `argparse` 切换到 `typer`，提供了更友好、更现代的CLI体验和更完善的帮助信息。
 
#### **修复 (Fixes)**
-   **平台适配器更新**: 修复并更新了多个大模型平台（元宝、Kimi、通义千问、AI8）的适配器，以应对上游API的变更，增强了流式响应处理的稳定性。
-   **代码分析修复**: 修复了 `guess_lexer` 在某些情况下可能引发属性错误的Bug。
#### **优化与重构 (Refactors & Improvements)**
-   **HTTP客户端重构**: 底层HTTP客户端全面从 `httpx` 切换到 `requests`，简化了项目依赖并统一了网络请求的实现。
-   **代码精简**: 移除了已废弃的 `jarvis-git-details` (`jgd`) 功能和 `oyi` 平台适配器，精简了项目结构。
-   **逻辑简化**: 优化了AI在调用工具前的用户确认逻辑。
#### **文档更新 (Documentation)**
-   **引入Jarvis Book**: 正式引入 "Jarvis Book" 作为官方文档，覆盖项目介绍、快速开始、核心概念、使用指南、工具开发、高级主题等九大章节。
-   **README优化**: 大幅重构了主 `README.md` 文件，使其结构更清晰、内容更精简，并提供了指向新文档系统的清晰导航。
本次更新主要聚焦于提升用户体验和可维护性，通过引入全新的 "Jarvis Book" 文档系统和升级到 `typer` 框架，让用户能更轻松地学习和使用Jarvis。同时，底层的重构和代码精简也为项目未来的发展奠定了更坚实的基础。


### Release Note - v0.2.1 2025-07-25

#### **新功能 (Features)**
- **自动化宣发流程**: 在生成Release Note的基础上，增加了自动生成多种风格朋友圈推广文案的功能，实现了从开发到宣发的一键式流程。
- **智能容错与修复**:
    - 当工具调用缺少`</TOOL_CALL>`闭合标签时，系统能够自动检测、补全并提请用户确认，极大地提升了工具调用的成功率。
    - 在多智能体交互中，自动补全缺失的`</SEND_MESSAGE>`标签，增强了消息解析的鲁棒性。
- **提升交互体验**: 将工具调用自动纠错后的确认选项，默认设置为“执行”，减少了用户的操作步骤，使交互更流畅。
- **新增多智能体示例**: 添加了“投资路演” (`investment_pitch.yaml`) 的多智能体协作示例，展示了如何构建角色分明、逻辑复杂的对话应用。

#### **文档更新 (Documentation)**
- **一键安装脚本**: 在 `README.md` 中新增了一键安装脚本，大大简化了新用户的安装配置过程。
- **优化文档结构**: `README.md` 的安装说明被重构为“一键安装”和“手动安装”两部分，使文档更清晰易读。

#### **优化与重构 (Refactors & Improvements)**
- **精简系统提示**: 移除了工具加载提示中的冗余信息，使Prompt更加简洁，减少了对模型的干扰。

#### **总结**
本次v0.2.1版本是一次聚焦于**自动化**和**用户体验**的重大更新。通过引入从代码到宣发的自动化能力、强大的智能容错机制和极致简化的安装流程，Jarvis的实用性和易用性得到了显著提升。新的多智能体示例也为探索更高级的AI应用场景提供了范本。


### Release Note - v0.2.0 2025-07-24

#### **新功能 (Features)**
- **LLM组 (LLM Groups)**: 新增了LLM组配置功能，允许用户在 `config.yaml` 中预定义多套模型组合（包括常规模型、思考模型及Token限制等），并通过 `JARVIS_LLM_GROUP` 或命令行参数 `--llm_group` 快速切换，极大地提升了在不同平台或任务间切换的灵活性。
- **自动化安装脚本**: 新增了 `scripts/install.sh` 脚本，可自动检测Python环境、克隆或更新Jarvis仓库、安装依赖并初始化配置，简化了新用户的部署和上手流程。
- **外部资源自动更新**: 新增了对外部工具和方法论仓库的每日自动更新检查机制。如果用户的自定义工具或方法论是通过git管理的，Jarvis会在启动时自动拉取最新版本。

#### **修复 (Fixes)**
- **模型名称修正**: 修正了配置文件和文档中Kimi平台的默认模型名称，从 `k1` 更新为 `k1.5`，确保与官方名称一致。

#### **优化与重构 (Refactors & Improvements)**
- **配置加载逻辑重构**: 重构了底层的配置加载系统，以完全支持LLM组的优先级覆盖规则（独立配置 > LLM组配置 > 默认值）。
- **Agent初始化流程优化**: 优化了 `Agent` 和 `CodeAgent` 的初始化逻辑，现在会根据指定的 `model_group` 来加载对应的平台、模型和Token配置。
- **全局Agent管理**: 改进了全局Agent的注册机制，现在可以获取到Agent实例本身，使得内部模块（如代码审查、Git提交）可以继承和使用调用方Agent的模型配置。

#### **文档更新 (Documentation)**
- **README更新**: 详细说明了新的LLM组配置方法，并更新了配置项说明表格。
- **产品报告更新**: 更新了产品报告中的多个应用案例，使其更具深度和技术代表性（例如，从Web开发转向嵌入式开发，从常规错误修复转向Coredump分析）。
- **技术文档更新**: 在技术文档中增加了LLM组设计的详细说明、工作机制和配置示例，并更新了所有相关的配置项描述。
- **工具描述增强**: 为 `generate_new_tool` 工具增加了提示，建议在工具代码中加入打印信息以方便追踪。

#### **其他 (Miscellaneous)**
- **类型提示与健壮性**: 为多个模块（如MCP客户端、git工具类）增加了更精确的类型提示和空值检查，提升了代码的健壮性。

本次更新的核心是引入了强大的**LLM组**功能，为专业用户提供了前所未有的灵活性和便利性。同时，通过新增的**安装脚本**和**文档优化**，我们显著改善了新用户的入门体验。内部的重构和优化也为系统未来的扩展奠定了更坚实的基础。

### Release Note - v0.1.225 2025-07-23

#### **新功能 (Features)**
- (project): 完善核心文档并优化网页搜索功能
- (cli): 添加 -e/--edit 命令行选项以编辑配置文件
- (config): 生成默认配置后退出程序

#### **修复 (Fixes)**
- (jarvis_agent): 修复 output_handler 的类型检查错误

#### **优化与重构 (Refactors & Improvements)**
- (agent): 优化输入处理器执行逻辑，仅在用户输入时触发
- (search_web): 使用 markdownify 替代 BeautifulSoup 解析网页内容
- (code_agent): 移除无用的 methodology 工具
- (project): 调整代码格式以提高可读性
- (jarvis): 重构 main 函数以提升代码可读性

#### **文档更新 (Documentation)**
- (readme): 添加 -e/--edit 命令行选项文档
- (product): 添加 Jarvis 产品汇报文档
- (project): 新增 Jarvis AI 助手产品汇报文档

#### **其他 (Miscellaneous)**
- (deps): 使用markdownify替换beautifulsoup4并配置uv索引
- 删除 Jarvis 产品汇报文档

本次更新主要带来了多项新功能，修复了若干问题，进行了代码优化和重构，提升了系统的稳定性和易用性。

### Release Note - v0.1.224 2025-07-21

#### **新功能 (Features)**
- **增强配置体验**: 更新了 `config_schema.json` 文件，为多种模型（如 OpenAI, Kimi, 通义等）的 API Key 增加了 schema 定义。现在，在支持 JSON Schema 的编辑器（如 VS Code）中配置 `config.yaml` 时，将获得**自动补全和参数提示**，大幅降低了配置错误的可能性。
- **扩展工具加载**: 支持通过 `JARVIS_TOOL_LOAD_DIRS` 环境变量配置外部工具加载目录，增强了系统的扩展性。

#### **修复 (Fixes)**
- 增强了工具调用的错误处理机制，当工具调用格式错误时能提供更明确的提示并防止程序崩溃。

#### **优化与重构 (Refactors & Improvements)**
- 重构了智能体(Agent)中工具使用提示的生成逻辑，实现了代码复用。
- 优化了 `check_and_update_git_repo` 的更新检查逻辑，改为每日只检查一次，提升了性能。
- 放宽了 `config.yaml` 的校验规则，允许存在未定义的属性，提高了配置的灵活性。

本次更新的核心是提升开发者体验（DX），通过增强配置文件的 schema，让 AI 助手的配置过程变得前所未有的简单和智能。同时，我们也增强了系统的扩展性和健壮性。

### Release Note - v0.1.223 2025-07-20
#### **新功能 (Features)**
-   **新增问题解决多智能体(Problem Solver)示例**:
    -   在 `example/multi_agent/` 目录下新增了 `problem_solver.yaml`，提供了一个完整、结构化的多智能体协作工作流。
    -   该工作流包含产品经理、问题定义、根因分析、方案设计、代码实现和验证等多个专业智能体。
    -   为所有智能体增加了文件存档步骤，在交接前会将报告（如 `01_problem_definition_report.md`）写入文件，确保流程可追溯。
    -   为智能体添加了 `use_methodology` 和 `use_analysis` 控制开关，并引入了“禁止杜撰”、“主动提问”等交互原则。
-   **丰富AI教练的方法论**:
    -   在 `example/roles/roles.yaml` 中，为“技术教练”角色在问题定义、根因分析、方案评估等阶段，补充了大量业界标准方法论，如 `5W1H`、`帕累托分析`、`SWOT分析`、`成本效益分析(CBA)` 和
`多标准决策分析(MCDA)` 等。
-   **命令行工具功能增强**:

    -   **会话管理**: 为 `jarvis` 和 `jarvis-code-agent` 新增 `--restore-session` 功能；为 `jarvis-platform-manager` 聊天模式增加了 `/save_session` 和 `/load_session` 命令。
    -   **知识库(RAG)增强**: `jarvis-rag` 新增 `list-docs` 子命令，并为常用选项增加了简写形式和 `--batch-size` 选项。
-   **模型更新**:
    -   在 `src/jarvis/jarvis_platform/kimi.py` 中，更新了 Kimi 平台的模型列表，以匹配最新的版本名称 (`k1.5`, `k1.5-thinking`, `k2-thinking`)。
    
#### **优化与重构 (Refactors & Improvements)**
-   **实现智能体懒加载**:
    -   在 `src/jarvis/jarvis_multi_agent/__init__.py` 中，将智能体初始化方式改为按需懒加载 (`_get_agent`)，提升了多智能体系统的启动性能和资源利用率。
-   **重构多智能体工作流**:
    -   引入“产品经理”(`ProductManager`)作为核心协调者，将原有的线性流程重构为以产品经理为中心的“中心-辐射”模式，增强了工作流的集中控制与灵活性。
-   **增强上下文传递**:
    -   在调用子智能体时，自动将用户的原始问题追加到其系统提示中，为子智能体提供更完整的任务背景。
-   **解耦提示生成逻辑**:
    -   在 `src/jarvis/jarvis_agent/builtin_input_handler.py` 中，将工具使用提示的生成逻辑重构为独立的 `build_action_prompt` 函数，提高了代码的模块化和可维护性。
#### **文档更新 (Documentation)**
-   **更新 `README.md`**:
    -   全面更新了 `jarvis`, `jarvis-code-agent`, `jarvis-agent`, `jarvis-platform-manager`, 和 `jarvis-rag` 等所有命令行工具的参数和功能说明，以反映最新的功能变更。

本次更新的核心是引入了结构化的“问题解决多智能体”工作流，并通过重构实现了智能体懒加载和中心化协调，大幅提升了系统的性能和可扩展性。同时，显著增强了AI教练的专业能力和命令行工具的易用性。


### Release Note - v0.1.222 2025-07-19

#### **新功能 (Features)**
- 为所有主要命令添加了快捷别名 (e.g., `jvs`, `jca`, `jcr`)，提升使用效率。
- 新增 `jarvis-rag` (`jrg`) 命令，提供独立的RAG功能入口。
- 新增 "GROW模型分析专家" 角色，用于结构化目标设定和问题解决。
- 新增 `JARVIS_ENABLE_STATIC_ANALYSIS` 配置项，允许用户控制是否在代码修改后执行静态分析。
- Kimi平台新增 "k2" 深度思考模型支持。

#### **修复 (Fixes)**
- (无)

#### **优化与重构 (Refactors & Improvements)**

- 优化了PDF导出样式 (`style.css`)，改善了字体、边距和布局，并增加了页码。
- 改进了会话恢复逻辑，确保恢复后能正确识别为非首次运行。
- 简化了Agent示例配置文件，移除了冗余的模型定义。

#### **文档更新 (Documentation)**
- 更新了 `README.md`，加入了所有命令的快捷方式，并补充了新功能说明。
- 更新了 `technical_documentation.md`，精简和澄清了RAG系统的架构描述。

#### **其他 (Miscellaneous)**
- (无)

本次更新主要聚焦于提升用户体验和内部架构优化。引入了大量命令别名以方便日常使用，并对核心Agent的LLM调用机制进行了重构，使其更加灵活。同时，新增了RAG和GROW模型专家等功能，并优化了文档和PDF产出质量。

### Release Note - v0.1.221 2025-07-14

#### **新功能 (Features)**
- (rag): 将 RAG 依赖项设为可选安装
- (rag): 支持配置RAG重排模型
- (rag): 为 add 命令添加 .ragignore 支持和批处理功能
- (docs): 引入基于 PrinceXML 的 PDF 生成流程

#### **修复 (Fixes)**
- (暂无)

#### **优化与重构 (Refactors & Improvements)**
- (edit_file): 移除AI辅助编辑并优化补丁应用逻辑
- (deps): 将RAG依赖项移至可选安装
- (jarvis_agent): 重构 Agent 类以提升模块化
- (jarvis_agent): 提取Agent提示词到独立文件
- (rag): 简化RAG配置，直接指定嵌入模型

#### **文档更新 (Documentation)**
- (jarvis_rag): 将模块文档和注释翻译为中文
- (docs): 修复技术文档中的标题格式和章节编号
- (config): 添加 JARVIS_RAG 配置项文档
- (cli): 更新CLI文档中嵌入模型参数名称
- (docs): 优化技术文档中的图表
- (rag): 补充 RAG 实现方案的技术文档

#### **其他 (Miscellaneous)**
- (reranker): 忽略 sort 方法的类型检查错误

本次更新主要围绕RAG功能进行增强和优化，将其依赖项设为可选，并支持了重排模型配置和`.ragignore`文件。同时，对Agent和代码编辑工具进行了重构，提升了系统的模块化和稳定性。文档方面也进行了大量更新和改进，并引入了PDF生成流程。

### Release Note - v0.1.220 2025-07-13

#### **新功能 (Features)**
- **新增 RAG 框架 (`jarvis-rag`)**: 引入了一个全新的 `jarvis-rag` 命令行工具，用于构建、管理和查询本地化的RAG（检索增强生成）知识库。
  - `jarvis-rag add`: 支持添加文件、目录或通配符模式的文档到知识库。
  - `jarvis-rag query`: 支持向知识库提问，并可指定不同的大语言模型进行回答。
- **支持 Python 3.12**: 项目现已正式支持 Python 3.12 版本。

#### **修复 (Fixes)**
- **元宝平台Cookie**: 修复了 `YUANBAO_COOKIES` 未设置时程序不抛出异常的问题，现在会明确提示用户进行设置。

#### **优化与重构 (Refactors & Improvements)**
- **Agent系统提示**: 重构并优化了核心Agent的系统提示（System Prompt），使其更清晰、更结构化，提升了与模型交互的稳定性。
- **依赖库更新**: 升级了多个核心依赖库，如 `ddgs`, `beautifulsoup4`, `lxml` 等，以获取最新的功能和安全修复。
- **提升Python版本要求**: 将项目的最低Python版本要求从 `3.8` 提升至 `3.9`。

#### **文档更新 (Documentation)**
- **README更新**: 详细更新了 `README.md` 文件，增加了 `jarvis-rag` 工具的完整使用说明和示例。

#### **其他 (Miscellaneous)**
- **项目配置**: 在 `pyproject.toml` 和 `setup.py` 中添加了 RAG 功能所需的新依赖项，并注册了新的 `jarvis-rag` 命令。
- **配置结构**: 在 `config_schema.json` 中添加了 `JARVIS_RAG` 的相关配置项，用于RAG功能的详细设置。

本次更新主要围绕 **本地化RAG知识库** 这一核心功能展开，极大地增强了Jarvis在特定领域知识问答和代码理解方面的能力。同时，通过对核心Agent的优化和依赖库的升级，提升了整体的稳定性和可维护性。

### Release Note - v0.1.219 2025-07-11

#### **新功能 (Features)**
- **增强网页搜索能力**: `search_web` 工具现已集成 DuckDuckGo 搜索引擎。当底层大模型不支持网页搜索时，本工具可独立执行搜索、抓取网页内容并进行总结，极大地扩展了信息获取能力。

#### **修复 (Fixes)**
- (本次更新无修复内容)
 
#### **优化与重构 (Refactors & Improvements)**
- **代码结构优化**: 将用户确认函数 `user_confirm` 统一移动至 `jarvis_utils.input` 模块，提升了代码的组织性和可维护性。
- **剪贴板功能增强**: 新增 `copy_to_clipboard` 工具函数，该函数能智能检测并依次尝试使用 `xsel` 和 `xclip` 命令，增强了在不同 Linux 环境下的剪贴板兼容性。
- **依赖项更新**: 在 `pyproject.toml` 和 `setup.py` 中添加了 `ddgs`, `beautifulsoup4`, `lxml` 等依赖，以支持新的网页搜索功能。

#### **文档更新 (Documentation)**
- **新增技术文档**: 添加了完整的技术文档 `docs/technical_documentation.md`，详细介绍了 Jarvis 的设计哲学、核心架构、组件交互、配置方法以及开发者指南。

#### **其他 (Miscellaneous)**
- **更新 .gitignore**: 将 `*.pdf` 文件类型添加到忽略列表，避免将 PDF 文件意外提交到版本库。

本次更新主要聚焦于增强系统的核心功能和提升开发者体验。通过引入独立的网页搜索能力，Jarvis 现在能够更自主地获取外部信息。同时，全面的技术文档和代码结构优化为未来的社区贡献和二次开发奠定了坚实的基础。

### Release Note - v0.1.214 2025-07-08

#### **新功能 (Features)**
- **会话持久化**: 新增了完整的会话保存与恢复功能。
- **新角色**: 在角色库中新增了 "公司技术教练认证首席导师" 角色，提供专业的教练式陪练引导。
- **命令增强**: `jpm role` 命令现在支持使用 `--platform` 和 `--model` 参数临时覆盖角色文件中定义的平台和模型。
- **内置命令**: 新增 `SaveSession` 内置命令，允许在 `jarvis` 交互中快速保存会话并退出。

#### **修复 (Fixes)**
- **流式服务**: 修复了 `jpm service` 中流式响应的实现问题，确保了数据能够实时、稳定地从模型传输到客户端。
- **文件编辑**: 改进了 `edit_file` 工具的补丁应用算法，提高了在处理不同缩进和首尾换行情况下的匹配成功率和准确性。

#### **优化与重构 (Refactors & Improvements)**
- **角色配置简化**: 移除了角色配置文件中每个角色必需的 `platform` 和 `model` 字段，使配置更简洁，并通过命令行参数赋予了更高的灵活性。
- **代码质量**: 对多个模块进行了代码重构，包括优化类型提示、移除冗余代码和改进中断处理逻辑，提升了代码的可读性和健壮性。

#### **文档更新 (Documentation)**
- **命令提示**: 更新了 `jpm` 的命令帮助信息和自动补全提示，加入了新的会话管理相关命令。
- **代码注释**: 在 `jarvis-code-agent(jac)` 相关代码中增加了关于何时执行静态检查的注释说明。

本次更新核心是引入了完整的会话持久化机制，极大地提升了工具的连续使用体验。同时，对底层服务和核心工具进行了多项修复与优化，并增加了一个功能强大的新角色。

### Release Note - v0.1.213 2025-07-07

#### **新功能 (Features)**
- 新增 "问题挖掘专家" 角色，专注于从复杂场景中识别和量化核心问题。

#### **修复 (Fixes)**
- 调整 `pyyaml` 依赖版本至 `>=5.3.1`，以提高兼容性。
- 将复制最后一条消息的快捷键从 `Ctrl+L` 更改为 `Ctrl+O`，以避免与终端清屏快捷键冲突。

#### **优化与重构 (Refactors & Improvements)**
- 重构 `AI8` 和 `Oyi` 平台模块，引入统一的 `http` 工具和 `while_success` 重试机制，增强了网络请求的稳定性和可靠性。
- 优化了部分代码的类型提示和格式，提升了代码质量和可读性。

本次更新主要通过重构网络请求模块提升了系统的稳定性，并新增了 "问题挖掘专家" 角色来增强问题分析能力，同时修复了一些依赖和快捷键问题。

### Release Note - v0.1.212 2025-07-06

#### **新功能 (Features)**  
- 新增AI8模型平台实现，支持AI8 API集成
- 新增OYI模型平台实现，支持OYI API集成
- 添加全局最后一条消息记录功能，可通过Ctrl+L快捷键复制

#### **修复 (Fixes)**  
- 修复Kimi模型文件解析和流式响应处理逻辑
- 修复Kimi模型消息流式响应处理中的Unicode解码问题

#### **优化与重构 (Refactors & Improvements)**  
- 重构Kimi模型的消息流式响应处理机制
- 优化平台管理器主模块的中文注释和文档
- 改进输入模块，添加最后一条消息复制功能

#### **文档更新 (Documentation)**  
- 更新平台管理器主模块的注释为中文
- 添加新功能的文档说明

#### **其他 (Miscellaneous)**  
- 更新输入模块的提示信息，包含新快捷键说明
- 优化代码格式和结构

本次更新主要增加了两个新的模型平台支持(AI8和OYI)，优化了Kimi模型的流式响应处理，并添加了实用的最后一条消息复制功能，提升了用户体验。

### Release Note - v0.1.211 2025-07-05

#### **新功能 (Features)**
- 添加tiktoken模型
- 添加提示信息复制到剪贴板功能

#### **修复 (Fixes)**
- 更新jarvis数据配置文件包含模式

#### **优化与重构 (Refactors & Improvements)**
- 移除HuggingFace模型解压功能
- 修改获取最近提交信息以过滤当前用户

本次更新主要增加了tiktoken相关功能支持，优化了提示交互体验，并改进了配置管理。


### Release Note - v0.1.210 2025-07-05

#### **新功能 (Features)**  
- 新增httpx>=0.28.1依赖，用于改进HTTP请求处理
- 实现stream_post流式POST请求方法，支持更高效的流式响应处理

#### **修复 (Fixes)**  
- 修复平台消息流处理逻辑，改进SSE格式数据解析
- 修复git工具中最新提交日期检查逻辑

#### **优化与重构 (Refactors & Improvements)**  
- 重构HTTP模块，从requests迁移到httpx库
- 优化流式响应处理逻辑，减少内存使用
- 改进代码结构，增加类型提示和文档字符串

#### **文档更新 (Documentation)**  
- 更新HTTP模块文档，反映新的httpx实现
- 添加stream_post方法文档说明

#### **其他 (Miscellaneous)**  
- 禁用CodeAgent中的方法论和分析功能
- 改进错误处理和连接稳定性

本次更新主要改进了HTTP请求处理能力，迁移到更现代的httpx库，并优化了流式响应处理逻辑，提升了系统稳定性和性能。


### Release Note - v0.1.209 2025-07-04
#### 1. 新功能(New Features)
- **新增平台管理命令别名**  
  在`pyproject.toml`和`setup.py`中为`jarvis-platform-manager`添加了`jpm`别名，提高命令可用性  
- **新增HTTP工具模块**  
  新增`src/jarvis/jarvis_utils/http.py`文件，提供统一的HTTP请求处理  
- **新增自动安装机制**  
  在`jarvis_utils/git_utils.py`中增加git更新后自动pip安装的逻辑  

#### 2. Bug修复(Bug Fixes)
- **修复编辑文件输出抑制问题**  
  在`edit_file_handler.py`中修正输出抑制逻辑  

- **修复文件上传逻辑**  
  在各平台文件中统一使用新的HTTP模块处理上传  

- **修复初始化流程**  
  在`jarvis_agent/__init__.py`中移除无效的历史记录处理  

#### 3. 性能优化(Performance Improvements)
- **优化token计数**  
  使用`tiktoken`替代`transformers`进行token计数  

#### 4. 文档更新(Documentation)
- **更新README文档**  
  修正命令行别名说明和配置参数说明  

- **更新配置schema**  
  移除过期的配置参数如`JARVIS_AUTO_UPDATE`  

#### 5. 其他变更(Other Changes)
- **依赖项更新**  
  移除`transformers`和`torch`，新增`tiktoken`和`pyyaml`  
- **新增.gitignore规则**  


# Release Note v0.1.208 - 2025-07-02

## 新增功能
- 新增五个专家角色配置
- 增强JSS fish补全功能
- 新增文案润色专家角色配置

## 问题修复
- 修复大消息分块提交时的响应拼接问题
- 修复edit_file_handler中的文件差异格式处理

## 其他改进
### 重构优化
- 移除yaspin依赖并简化控制台输出
- 优化新增文件确认逻辑和类型提示
- 从Python文件类型中移除isort工具
- 移除开发中的jarvis-dev模块
- 移除未使用的工具并统一使用rewrite_file工具

### 代码质量
- 添加类型检查忽略注释
- 改进shell名称获取逻辑并更新类型注解


### Release Note - v0.1.207 2025-06-27

#### **新功能 (Features)**  
- 新增'ToolUsage'命令，提示可用工具列表及使用方法
- 新增'ReloadConfig'命令，重新加载配置文件
- 新增'Check'命令，执行静态代码检查，包括错误和风格问题

#### **修复 (Fixes)**  
- 修复了分块提交内容时的响应处理逻辑

#### **优化与重构 (Refactors & Improvements)**  
- 调整了JARVIS_CONFIRM_BEFORE_APPLY_PATCH默认值为false
- 优化了Web搜索命令的描述，支持多种提问格式
- 优化了'FindRelatedFiles'命令的描述，更准确地查找与功能相关的文件
- 重构了分块提交内容时的响应处理逻辑，提高稳定性

#### **文档更新 (Documentation)**  
- 更新了README.md中的命令列表和描述
- 更新了配置项JARVIS_CONFIRM_BEFORE_APPLY_PATCH的默认值说明

#### **其他 (Miscellaneous)**  
- 调整了部分代码格式和注释

本次更新主要优化了命令功能、修复了配置一致性问题，并改进了大内容分块提交的处理逻辑。

### Release Note - v0.1.206 2025-06-27

#### **优化与重构 (Refactors & Improvements)**  
- 优化了edit_file_handler.py中的代码格式和类型提示
- 修复了中断处理时的spinner显示问题
- 改进了补丁应用时的用户输入处理流程

本次更新主要针对代码质量和用户体验进行了优化，特别是改进了文件编辑处理器的稳定性和交互体验

### Release Note - v0.1.205 2025-06-23

#### **新功能 (Features)**  
- 新增中断处理机制，允许用户在补丁应用中断时提供补充信息
- 更新了多行输入提示信息，改为中文显示

#### **修复 (Fixes)**  
- 修复了多个类型检查警告，添加了类型忽略注释
- 修复了中断处理逻辑，添加了中断状态重置

#### **优化与重构 (Refactors & Improvements)**  
- 重构了文件编辑处理器的补丁应用逻辑
- 优化了输入工具的类型提示和导入结构

#### **其他 (Miscellaneous)**  
- 移除了不必要的代码注释
- 统一了多行输入工具的使用方式

本次更新主要优化了代码质量，增强了中断处理能力，并改进了用户体验。

### Release Note - v0.1.204 2025-06-19

#### **新功能 (Features)**  
- 新增文件添加确认机制，当检测到大量新增文件、代码行数或二进制文件时会提示用户确认
- 在代码编辑器中添加中断检查功能，支持用户中断补丁应用

#### **修复 (Fixes)**  
- 修复了长上下文提交时的进度显示问题
- 修复了git提交流程中新增文件检测逻辑

#### **优化与重构 (Refactors & Improvements)**  
- 重构了git工具类，提取新增文件检测和确认逻辑到独立函数
- 优化了平台基础类的长文本提交处理，移除spinner改用普通输出
- 改进代码编辑器的错误处理流程

#### **文档更新 (Documentation)**  
- 更新代码工程师指南，添加文件操作工具使用说明

#### **其他 (Miscellaneous)**  
- 添加开发者激励提示信息
- 改进git提交信息模板

本次更新主要增强了git变更检测和用户确认机制，优化了长文本处理性能，并改进了开发者体验。

### Release Note - v0.1.203 2025-06-17

#### **新功能 (Features)**  
- 改进了文件路径解析逻辑，支持单引号、双引号和无引号的文件路径格式
- 添加了重复文件路径的合并处理功能
- 增强了搜索文本的多处匹配警告提示

#### **修复 (Fixes)**  
- 修复了搜索文本在文件中不存在时的错误处理
- 修复了缩进搜索文本的多处匹配检测问题

#### **优化与重构 (Refactors & Improvements)**  
- 统一了补丁数据结构中的键名（SEARCH/REPLACE）
- 优化了错误提示信息的输出格式
- 重构了补丁解析逻辑，提高代码可读性

#### **文档更新 (Documentation)**  
- 更新了方法注释，更清晰地描述功能和行为

#### **其他 (Miscellaneous)**  
- 改进了代码缩进和格式一致性

本次更新主要改进了文件编辑处理器的稳定性和用户体验，增强了错误检测和处理能力。

### Release Note - v0.1.202 2025-06-16

#### **优化与重构 (Refactors & Improvements)**  
- 优化了文件编辑处理器的正则表达式匹配逻辑，移除了不必要的空格匹配
- 简化了DIFF块的格式标记，使用更简洁的SEARCH/REPLACE标签
- 改进了文件编辑指令的模板格式，使其更加紧凑易读

#### **其他 (Miscellaneous)**  
- 修复了平台基础类中消息接收确认的格式问题

本次更新主要对代码编辑功能进行了优化和重构，提高了文件编辑指令的处理效率和可靠性。


### Release Note - v0.1.201 2025-06-15

#### **新功能 (Features)**  
- 新增EditFileHandler类，用于处理文件编辑指令(PATCH块)
- 支持通过PATCH指令进行精确的文件内容修改
- 新增fast_edit和slow_edit两种编辑模式

#### **修复 (Fixes)**  
- 修复yuanbao平台首次聊天标志未正确重置的问题
- 修复文件编辑工具中yaml解析失败时的错误处理
- 修复thinking标签未正确处理的问题

#### **优化与重构 (Refactors & Improvements)**  
- 重构文件编辑工具为多文件处理模式
- 优化代码补丁生成逻辑，增加自动缩进匹配功能
- 改进文件编辑失败时的回滚机制

#### **文档更新 (Documentation)**  
- 更新文件编辑指令格式文档
- 添加PATCH处理器使用说明

#### **其他 (Miscellaneous)**  
- 移除旧的edit_file工具，改用新的EditFileHandler
- 优化工具调用格式错误提示信息

本次更新主要改进了文件编辑功能，新增了更精确的PATCH指令支持，并优化了编辑失败时的处理流程。

### Release Note - v0.1.200 2025-06-13

#### **新功能 (Features)**  
- 添加了工具调用中断时的用户干预处理逻辑
- 新增git仓库更新后的自动重启功能

#### **修复 (Fixes)**  
- 修复了builtin_input_handler中ReloadConfig的返回逻辑
- 修复了Yuanbao平台请求超时问题

#### **优化与重构 (Refactors & Improvements)**  
- 优化了Yuanbao平台所有请求的超时处理(统一设置为600秒)
- 移除了builtin_replace_map.py中冗余的ToolHelp模板

#### **文档更新 (Documentation)**  
- 无

#### **其他 (Miscellaneous)**  
- 优化了utils.py的导入顺序

本次更新主要增强了工具调用中断处理能力，优化了Yuanbao平台的请求稳定性，并简化了内置替换映射表。

### Release Note - v0.1.199 2025-06-10

#### **新功能 (Features)**  
- 无

#### **修复 (Fixes)**  
- 修复了edit_file工具的多处匹配错误提示格式
- 修复了user_confirm函数中的KeyboardInterrupt异常处理问题

#### **优化与重构 (Refactors & Improvements)**  
- 优化rewrite_file工具，统一使用绝对路径处理文件
- 改进rewrite_file工具的文件列表记录功能
- 移除了utils.py中不必要的空行

#### **文档更新 (Documentation)**  
- 无

#### **其他 (Miscellaneous)**  
- 更新了docs/images/wechat.png图片文件

本次更新主要优化了文件工具的错误处理和路径处理逻辑，增强了工具的健壮性。

### Release Note - v0.1.197 2025-06-07

#### **新功能 (Features)**  
- 新增历史对话文件上传功能，支持将历史对话保存为临时文件并上传
- 添加JARVIS_USE_HISTORY_COUNT配置项，替代原有的JARVIS_USE_HISTORY布尔配置

#### **优化与重构 (Refactors & Improvements)**  
- 重构历史记录处理逻辑，分离保存功能到独立方法
- 优化上下文切换机制，支持文件上传方式保留历史
- 改进README.md配置说明，更新历史记录相关文档

#### **其他 (Miscellaneous)**  
- 修复临时文件清理逻辑，确保异常情况下也能正确清理

本次更新主要增强了历史记录处理能力，支持通过文件上传方式保留完整对话历史，同时优化了配置项和文档说明。

### Release Note - v0.1.196 2025-06-05

#### **新功能 (Features)**  
- 新增历史记录功能(JARVIS_USE_HISTORY_COUNT配置项)
- 添加历史记录导出为Markdown的功能

#### **优化与重构 (Refactors & Improvements)**  
- 调整首次运行时文件上传逻辑
- 重构Agent初始化代码，提取_first_run方法
- 优化历史记录处理逻辑

#### **文档更新 (Documentation)**  
- 更新README.md添加JARVIS_USE_HISTORY配置说明

本次更新主要增加了历史记录功能，可以将历史记录作为上下文，并支持导出为Markdown格式，同时优化了代码结构和文件处理逻辑。

### Release Note - v0.1.195 2025-06-04

#### **新功能 (Features)**  
- 新增Jarvis历史记录功能(jarvis_history)
- 新增Jarvis通用代理工具功能文档

#### **优化与重构 (Refactors & Improvements)**  
- 改进git差异获取逻辑，支持空仓库情况
- 优化输出异常处理，防止崩溃
- 增强方法论上传功能，支持同时上传其他文件
- 改进代码导入组织，加快初始化速度

#### **文档更新 (Documentation)**  
- 更新README.md，添加Jarvis通用代理工具详细文档

#### **其他 (Miscellaneous)**  
- 修复git差异解码错误处理
- 改进文件上传失败处理逻辑
- 优化代码格式和类型提示

本次更新主要增强了Jarvis的历史记录功能，改进了git操作和异常处理，并完善了文档体系。

### Release Note - v0.1.194 2025-06-01

#### **新功能 (Features)**  
- 添加重新加载配置功能
- 添加ToolUsage标记处理功能
- 在提交流程中提前获取修改文件列表

#### **修复 (Fixes)**  
- 修复缩进处理时空行也被添加空格的问题
- 调整工具调用和中断处理的执行顺序

#### **优化与重构 (Refactors & Improvements)**  
- 将配置文件加载逻辑提取到独立函数
- 优化代码格式和导入顺序
- 精简各语言默认的lint工具配置
- 移除未使用的导入语句和功能

#### **文档更新 (Documentation)**  
- 重构文档结构并优化内容组织

本次更新主要包含配置管理增强、工具调用流程优化、代码质量改进和文档重构。

### Release Note - v0.1.193 2025-05-31

#### **新功能 (Features)**  
- 添加example/roles/roles.yaml角色配置文件
- 完善代码代理功能文档和使用说明

#### **修复 (Fixes)**  
- 修复addon_prompt生成逻辑
- 修复代码代理功能中的文件修改提示逻辑
- 修复yuanbao平台初始化参数传递问题

#### **优化与重构 (Refactors & Improvements)**  
- 优化代码代理功能的输出格式
- 重构工具注册表的输出格式
- 改进方法论模块的输出显示

#### **文档更新 (Documentation)**  
- 更新README.md添加代码代理功能说明
- 完善内置工具帮助文档

#### **其他 (Miscellaneous)**  
- 添加空文件处理逻辑
- 改进错误处理提示

本次更新主要新增了代码代理功能，并优化了多个模块的输出显示和错误处理。

### Release Note - v0.1.192 2025-05-31

#### **新功能 (Features)**  
- 新增OpenAI平台文件上传功能支持检测方法
- 改进中断信号处理机制，支持中断计数

#### **修复 (Fixes)**  
- 修复用户干预信息拼接格式问题
- 修正补丁应用后的提示信息显示逻辑

#### **优化与重构 (Refactors & Improvements)**  
- 重构全局变量管理代码，改进代码格式和可读性
- 优化中断信号处理逻辑，增加多次中断保护
- 改进代码代理的返回信息提示

#### **文档更新 (Documentation)**  
- 更新代码注释和类型提示

#### **其他 (Miscellaneous)**  
- 调整控制台主题配置格式
- 优化SIGINT信号处理逻辑

本次更新主要改进了中断处理机制和代码可维护性，新增了文件上传功能支持检测，并优化了用户交互体验。

### Release Note - v0.1.191 2025-05-31

#### **新功能 (Features)**  
- 新增角色配置功能，支持从YAML文件加载角色配置并开始对话
- 添加中断处理机制，支持在模型交互期间接收SIGINT信号
- 为平台管理器添加角色子命令(--role/-c)

#### **修复 (Fixes)**  
- 修复了文件分析工具的输出格式，使用<output>和<error>标签包裹
- 修复了set_system_message方法名不一致问题，统一为set_system_prompt

#### **优化与重构 (Refactors & Improvements)**  
- 重构了平台管理器的代码结构，提高可读性
- 移除了默认的addon提示

#### **文档更新 (Documentation)**  
- 更新了工具注册表的输出处理文档
- 添加了角色配置文件的示例说明

#### **其他 (Miscellaneous)**  
- 优化了信号处理逻辑

本次更新主要增强了平台管理器的功能，新增了角色配置支持，并改进了中断处理机制，提高了系统的稳定性和用户体验。

### Release Note - v0.1.190 2025-05-30

#### **新功能 (Features)**  
- 新增预定义任务(pre-command)功能，支持通过YAML文件快速执行常用命令
- 工具生成功能增加自动依赖检查和安装功能

#### **修复 (Fixes)**  
- 修复了工具注册时参数处理的问题
- 移除了已废弃的`jarvis-ask-codebase`功能

#### **优化与重构 (Refactors & Improvements)**  
- 优化了工具生成器的代码结构和错误处理
- 改进了工具注册流程的稳定性
- 增强了工具生成时的依赖管理功能

#### **文档更新 (Documentation)**  
- 更新了README中的预定义任务使用说明
- 完善了工具生成功能的文档

#### **其他 (Miscellaneous)**  
- 更新了微信图片资源

本次更新主要增强了工具的生成和管理能力，特别是新增了预定义任务功能和自动依赖管理功能，同时优化了现有功能的稳定性和用户体验。

### Release Note - v0.1.189 2025-05-29

#### **新功能 (Features)**  
- 新增`support_upload_files()`方法用于检查平台是否支持文件上传
- 新增`generate_summary()`方法用于生成对话历史摘要
- 优化了代码差异文件上传处理逻辑

#### **修复 (Fixes)**  
- 修复了文件上传失败时的错误处理流程
- 修复了`clear_history()`方法的重命名问题
- 修复了平台不支持上传文件时的错误提示

#### **优化与重构 (Refactors & Improvements)**  
- 重构了`GitCommitTool`的代码结构，提取了独立方法
- 优化了文件上传前的平台支持检查
- 改进了大文件处理逻辑

#### **文档更新 (Documentation)**  
- 更新了方法文档字符串
- 完善了错误提示信息

#### **其他 (Miscellaneous)**  
- 调整了`JARVIS_MAX_BIG_CONTENT_SIZE`默认值为160000
- 优化了代码格式和缩进风格

本次更新主要优化了文件上传处理流程，新增了平台支持检查功能，并改进了错误处理机制。

### Release Note - v0.1.188 2025-05-28

#### **新功能 (Features)**  
- 新增RefactorCheckerExpert重构检查专家，用于检查重构后的代码逻辑是否与原代码完全一致

#### **修复 (Fixes)**  
- 修复了文件输入处理器中文件引用解析的问题，防止有其他引号干扰文件路径解析
- 修复了edit_file工具中补丁应用失败的问题，现在会自动尝试增加1-16个空格缩进重试匹配

#### **优化与重构 (Refactors & Improvements)**  
- 重构了jarvis_agent的初始化逻辑，调整了输入处理器的执行顺序
- 优化了文件输入处理器的中文注释和错误处理
- 去除了main.py中的交互模式循环结构

#### **文档更新 (Documentation)**  
- 更新了RefactorCheckerExpert的详细工作流程文档
- 完善了file_input_handler的中文参数说明

#### **其他 (Miscellaneous)**  
- 改进了edit_file工具的错误提示信息，现在会显示更详细的匹配失败原因

本次更新主要增强了代码重构检查能力，改进了文件处理逻辑，并优化了用户体验。

### Release Note - v0.1.187 2025-05-27

#### **修复 (Fixes)**  
- 修复了config参数从必选改为可选(main.py)
- 修复了对话长度计算逻辑(__init__.py)

#### **优化与重构 (Refactors & Improvements)**  
- 优化了模型响应处理流程(__init__.py)
- 改进了文件上传后的提示信息(__init__.py)

### Release Note - v0.1.186 2025-05-27

#### **新功能 (Features)**  
- 新增支持通过`-f/--config`参数指定自定义配置文件路径
- 添加对`-c/--agent_definition`参数的支持，用于指定代理定义文件

#### **修复 (Fixes)**  
- 修复文件编辑工具中文件路径处理问题，现在使用绝对路径

#### **优化与重构 (Refactors & Improvements)**  
- 重构`init_env`函数，支持通过参数传递配置文件路径
- 优化配置文件加载逻辑
- 改进HuggingFace模型解压路径处理

本次更新主要增强了配置管理功能，改进了初始化流程，并修复了文件路径处理相关的问题。

### Release Note - v0.1.185 2025-05-26

#### **新功能 (Features)**  
- 推荐腾讯元宝作为首选平台，优化了平台适配性
- 新增文件上传功能，支持在Agent初始化时自动上传文件
- 扩展通义平台支持的文件类型，新增对多种图片格式的支持

#### **修复 (Fixes)**  
- 修复了文件处理工具中的文件存在性检查逻辑
- 修复了补丁应用失败时的错误信息显示问题
- 修复了工具调用格式错误的提示信息

#### **优化与重构 (Refactors & Improvements)**  
- 优化了README文档中的平台推荐说明
- 重构了文件上传处理流程，提升稳定性
- 改进了补丁应用的错误处理机制

#### **文档更新 (Documentation)**  
- 更新了README中的配置说明，明确推荐腾讯元宝平台
- 完善了工具调用格式错误的帮助信息

本次更新主要增强了文件处理能力和平台适配性，优化了用户体验和错误处理机制。

### Release Note - v0.1.184 2025-05-26

#### **新功能 (Features)**
- 添加文件上传进度指示和错误处理
  - 在文件上传过程中增加了进度指示，并改进了错误处理机制。
- 添加系统消息初始化功能
  - 增加了系统消息支持，以提升对话初始化的功能。

#### **代码优化与修复 (Code Refinement & Fixes)**
- 移除了生成新工具时的代码验证和处理步骤，直接写入原始工具代码。
  - 这简化了工具生成流程，但可能要求用户提供更规范的输入代码。

本次更新主要优化了文件上传的用户体验，并增加了系统消息的支持，以提升对话初始化的功能。

#### **新功能 (Features)**  
- 新增通义千问平台支持，包含四种模型类型：Normal, Thinking, Deep-Research, Code-Chat
- 添加通义千问cookies获取指南和配置说明文档
- 新增通义千问平台实现文件(src/jarvis/jarvis_platform/tongyi.py)

#### **修复 (Fixes)**  
- 修复Yuanbao平台中思考模式消息处理逻辑
- 修复Kimi平台模型名称返回问题

#### **优化与重构 (Refactors & Improvements)**  
- 优化平台注册表中不再需要的set_suppress_output方法
- 统一各平台思考模式消息处理格式

#### **文档更新 (Documentation)**  
- 更新README.md添加通义千问平台配置说明
- 添加通义千问cookies获取图示(docs/images/tongyi.png)

本次更新主要新增了对通义千问平台的支持，提供了完整的平台实现和配置文档，并优化了现有平台的消息处理逻辑。

### Release Note - v0.1.182 2025-05-25

#### **新功能 (Features)**  
- 新增文件输入处理功能 (file_input_handler.py)
- 新增用户数据存储功能 (__init__.py)
- 新增文件内容读取时的用户数据跟踪功能 (file_operation.py, read_code.py)

#### **修复 (Fixes)**  
- 修正git diff命令参数错误 (pre-command)
- 修复文件操作工具中的边界条件问题 (file_operation.py)

#### **优化与重构 (Refactors & Improvements)**  
- 优化编辑工具的核心逻辑 (edit_file.py)
- 改进代码阅读工具的输出格式 (read_code.py)
- 重构系统提示标签格式 (__init__.py)

#### **文档更新 (Documentation)**  
- 更新jarvis_agent模块的初始化文档 (__init__.py)

本次更新主要增强了文件处理能力和用户数据管理功能，同时优化了核心工具的性能和稳定性。新增的文件输入处理功能可以智能识别文件引用并自动读取内容，用户数据存储功能为工具间数据共享提供了便利。

### Release Note - v0.1.181 2025-05-24

#### **主要变更**
1. **文档清理**
- 移除了所有过时的文档图片和markdown文件
- 清理了不再使用的用户文档内容

2. **代码重构**
- 大幅精简了code_agent.py的实现逻辑
- 移除了find_methodology工具及相关代码
- 优化了配置系统，使用原生布尔类型替代字符串配置
- 重构了git工具函数到专用模块

3. **功能调整**
- 移除了ask_codebase工具的全部实现
- 更新了多个工具的默认配置值
- 增强了execute_script工具的功能

4. **其他改进**
- 更新了项目依赖配置
- 优化了多个工具的实现细节
- 清理了不再使用的代码和资源


### Release Note - v0.1.180 2025-05-23

#### **新功能 (Features)**  
- 新增yaml配置文件方式配置替换键值对
- 添加MCP工具配置支持并重构注册逻辑
- 重构配置文件管理逻辑
- Kimi、OpenAI和Yuanbao平台认证配置项使用ENV配置管理
- 添加配置文件schema支持并改进配置文件处理

#### **修复 (Fixes)**  
- 修正自动更新配置默认值
- 修正文件编辑工具中的补丁内容格式化

#### **优化与重构 (Refactors & Improvements)**  
- 将配置文件读取逻辑拆分为独立函数
- 重构环境初始化逻辑以同时支持配置文件和旧版env文件
- 简化命令使用统计逻辑并移除未使用的datetime导入
- 优化MCP配置错误信息的输出内容
- 优化版本检查和更新逻辑
- 优化配置项枚举值的格式并移除未使用的API配置
- 将环境变量配置重构为通用配置系统
- 移除不再使用的旧配置文件引用

#### **文档更新 (Documentation)**  
- 更新配置方式说明并移除废弃方法
- 更新MCP配置文档并调整配置模式
- 更新Yuanbao配置格式
- 更新配置文件格式和路径说明
- 为所有MCP配置模式添加enable字段说明
- 添加流式MCP配置说明

#### **其他 (Miscellaneous)**  
- 添加旧配置文件格式迁移警告
- 移除API密钥未设置时的详细指引信息
- 为所有yaml.safe_dump调用添加allow_unicode参数支持

本次更新主要围绕配置系统进行了全面重构和功能增强，新增了多平台API支持，优化了文档和错误处理机制，并修复了若干关键问题。


### Release Note - v0.1.179 2025-05-22

#### **新功能 (Features)**  
- 添加可流式传输的HTTP MCP客户端实现(StreamableMcpClient)
- 新增lint工具支持并集成到代码修改提示中
- 添加命令使用统计功能
- 添加YAML格式配置文件支持
- 添加任务分析功能支持

#### **修复 (Fixes)**  
- 修改环境变量默认值：JARVIS_USE_METHODOLOGY和JARVIS_USE_ANALYSIS从'true'改为'false'
- 移除不再使用的lsp_get_diagnostics工具

#### **优化与重构 (Refactors & Improvements)**  
- 优化代码结构和导入顺序
- 优化lint工具匹配逻辑并统一文件名大小写处理
- 优化git差异获取功能以包含新增文件
- 优化操作列表的显示格式
- 优化系统提示格式和内容
- 优化提交信息生成提示模板结构

#### **文档更新 (Documentation)**  
- 统一函数文档字符串格式
- 更新README导航链接格式
- 更新配置格式并添加文件路径说明

#### **其他 (Miscellaneous)**  
- 删除空文件aaaa
- 移除不再需要的依赖项(jedi和sseclient)
- 添加tabulate依赖项

本次更新主要增强了配置管理、代码质量检查和统计功能，同时进行了多项代码优化和重构。特别值得注意的是配置系统的改进，包括YAML格式支持和环境变量默认值的调整。


### Release Note - v0.1.178 2025-05-21

#### **新功能 (Features)**  
- 添加方法论分析功能，支持通过配置启用任务分析和方法论生成
- 新增`use_methodology`参数控制方法论的使用
- 增强文件编辑工具功能，支持两种编辑模式和AI辅助编辑

#### **修复 (Fixes)**  
- 修复工具过滤逻辑错误，避免KeyError异常
- 修正生成release note时的git log参数错误
- 移除冗余的错误信息输出和未使用的库导入

#### **优化与重构 (Refactors & Improvements)**  
- 移除整个LSP实现模块，将被新的代码分析架构替代
- 重构文件编辑工具文档，提供更清晰的使用指南
- 更新代码库分析工具的平台配置

#### **文档更新 (Documentation)**  
- 为OpenAIModel类添加详细方法文档
- 在分析步骤中新增要求，确保结论基于实际代码证据
- 更新微信二维码图片

#### **其他 (Miscellaneous)**  
- 修改任务完成提示逻辑，明确禁止输出TOOL_CALL标签
- 清理代码保持简洁性

本次更新主要包含功能增强、错误修复和架构优化，特别是新增了方法论分析功能并重构了文件编辑工具。同时移除了LSP相关模块，为新的代码分析架构做准备。


### 版本发布说明 - v0.1.177 (2025-05-20)

#### ✨ 核心功能增强
1. **全新欢迎系统**
   - 为所有工具添加动态ASCII艺术欢迎界面
   - 实现渐变色彩文本输出效果（蓝→青渐变）
   - 显示版本号和项目链接

2. **代码编辑工具升级**
   - 新增`fast_edit`快速编辑模式
   - 优化`slow_edit`容错机制（3次重试）
   - 增强补丁应用的唯一性检查

3. **统计监控**
   - 新增工具调用次数统计
   - 支持通过`jarvis-tools stat`查看排名
   - 数据持久化存储到`tool_stat.yaml`

#### 🐛 关键修复
1. **稳定性修复**
   - 支持`MAX_TOOL_CALL_COUNT=0`时工具无限调用
   - 解决长文本分块时的最小块大小计算错误
   - 修正Yuanbao平台文件大小显示格式

2. **输出优化**
   - 统一所有错误信息的图标间距
   - 将语法高亮主题从Dracula改为Monokai
   - 优化多行输出的显示逻辑

#### ⚙️ 配置变更
| 配置项 | 原值 | 新值 | 说明 |
|-------|------|------|------|
| MAX_TOKEN_COUNT | 102M | 960K | 降低内存占用 |
| MAX_BIG_CONTENT | 96K | 1M | 支持更大文件处理 |
| MAX_TOOL_CALLS | 20 | 0=∞ | 支持无限调用模式 |

### Release Note - v0.1.176 2025-05-19

#### **新功能 (Features)**
- 无

#### **修复 (Fixes)**
- 修正pre-command文件中git diff命令的格式说明
- 更新JARVIS_MAX_BIG_CONTENT_SIZE配置值
- 添加JARVIS_PRETTY_OUTPUT配置选项

#### **优化与重构 (Refactors & Improvements)**
- 优化文件输入处理逻辑
- 重构平台聊天输出处理
- 改进文本分块处理逻辑

#### **文档更新 (Documentation)**
- 更新README.md中的配置说明

#### **其他 (Miscellaneous)**
- 删除未使用的file_input_handler模块

本次更新主要优化了代码结构和配置选项，移除了不使用的模块，并改进了文本处理逻辑。

### Release Note - v0.1.175 2025-05-17

#### **新功能 (Features)**
- 新增了方法论上传功能，支持将方法论上传到平台
- 在代码代理中添加了静态检查工具支持
- 为Kimi、OpenAI和Yuanbao平台添加了Rich实时输出显示功能
- 在平台管理器中新增对话记录保存功能(/save和/saveall命令)

#### **修复 (Fixes)**
- 修复了pre-command文件中release_note生成步骤的描述
- 移除了jarvis_agent中冗余的print_stream方法
- 修正了工具注册表中的格式说明

#### **优化与重构 (Refactors & Improvements)**
- 优化了多agent系统的消息格式
- 改进了方法论提取和上传逻辑
- 重构了平台交互的输出显示方式

#### **文档更新 (Documentation)**
- 更新了pre-command文档中的指令说明
- 完善了方法论模板格式

#### **其他 (Miscellaneous)**
- 统一了各平台的消息格式规范
- 优化了代码格式和注释

本次更新主要针对平台交互、方法论管理和输出显示进行了全面优化，提升了系统的交互体验和可维护性。


### Release Note - v0.1.174 2025-05-16

#### **修复 (Fixes)**  
- 调整JARVIS_MAX_BIG_CONTENT_SIZE默认值从64000到96000

#### **优化与重构 (Refactors & Improvements)**  
- 优化长文本处理逻辑和token计算方式

本次更新主要优化了文本处理逻辑和token计算方式。

### Release Note - v0.1.173 2025-05-16

#### **修复 (Fixes)**  
- 调整JARVIS_MAX_BIG_CONTENT_SIZE默认值为64000，优化内存使用

本次更新主要优化了系统内存使用效率，将大内容处理默认值调整为更合理的62.5KB。


### Release Note - v0.1.171 2025-05-16

#### **新功能 (Features)**  
- 添加生成ReleaseNote的自动化流程
- 添加长上下文交互时的进度显示
- 新增JARVIS_MAX_BIG_CONTENT_SIZE配置参数
- 改进任务分析流程和工作生成机制
- 重构任务分析提示模板以支持工作生成和版本控制
- 为agent添加基本优先级显示
- 改进release_note生成格式和内容结构  

#### **修复 (Fixes)**  
- 修正ReleaseNote.md文件写入方式为追加导致重复问题
- 修改默认最大内容大小从10MB改为1MB
- 修复上下文丢失时的空响应处理
- 修复自定义回复循环和显示格式问题
- 修复大文件上下文丢失时的错误处理逻辑  

#### **优化与重构 (Refactors & Improvements)**  
- 优化上下文长度过滤编辑逻辑
- 简化对话配置和结果显示模板
- 移除chat_big_content策略并统一为大内容处理编辑逻辑  

#### **文档更新 (Documentation)**  
- 更新release_note生成编辑和重命名文件
- 更新pre-command文档中jgc命令的说明
- 重构发布说明格式和补充细节更新内容  

#### **其他 (Miscellaneous)**  
- 在发布说明中添加当前日期和预期发布时间

本次更新主要改进了发布流程自动化，优化了任务分析机制，并修复了多个关键问题。
